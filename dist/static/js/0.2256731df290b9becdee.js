webpackJsonp([0],{"+HRN":function(e,t,a){"use strict";var i=a("X3l8").Buffer,r=a(3);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,a=""+t.data;t=t.next;)a+=e+t.data;return a},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);for(var t,a,r,n=i.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,a=n,r=o,t.copy(a,r),o+=s.data.length,s=s.next;return n},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},"/MLu":function(e,t,a){e.exports=a("cSWu").PassThrough},"0beM":function(e,t,a){e.exports=a.p+"static/img/wind_5.c4c09ef.png"},"1QD6":function(e,t){},"1xD7":function(e,t){},2:function(e,t){},"2Xy1":function(e,t){},3:function(e,t){},"4/4u":function(e,t,a){e.exports=a("cSWu").Transform},"4PU+":function(e,t,a){e.exports=a.p+"static/img/window_slide3.457e323.png"},"5zde":function(e,t,a){a("zQR9"),a("qyJz"),e.exports=a("FeBl").Array.from},"67N+":function(e,t,a){e.exports=a.p+"static/img/firedoor7.d03c911.png"},"6RIr":function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return n});const i=[{label:"参数设置",value:1},{label:"操作指令",value:2},{label:"信号",value:3},{label:"配置",value:4}],r=[{label:"bool",value:1},{label:"int",value:2}],n=["#73c0de","#5470c6","#6dadf8","#91cc75","#3ba272","#9a60b4","#ffff00","#e9fa58","#ffa500","#fc5252","#5d5deb"]},"7VLd":function(e,t){},"7dSG":function(e,t,a){"use strict";(function(t,i){var r=a("ypnx");function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,a){var i=e.entry;e.entry=null;for(;i;){var r=i.callback;t.pendingcb--,r(a),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=_;var s,o=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?setImmediate:r.nextTick;_.WritableState=v;var l=Object.create(a("jOgh"));l.inherits=a("LC74");var c={deprecate:a("iP15")},u=a("UcPO"),d=a("X3l8").Buffer,p=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var m,f=a("x0Ha");function h(){}function v(e,t){s=s||a("DsFX"),e=e||{};var i=t instanceof s;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var l=e.highWaterMark,c=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=l||0===l?l:i&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var a=e._writableState,i=a.sync,n=a.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(a),t)!function(e,t,a,i,n){--t.pendingcb,a?(r.nextTick(n,i),r.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),S(e,t))}(e,a,i,t,n);else{var s=w(a);s||a.corked||a.bufferProcessing||!a.bufferedRequest||g(e,a),i?o(y,e,a,s,n):y(e,a,s,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function _(e){if(s=s||a("DsFX"),!(m.call(_,this)||this instanceof s))return new _(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function b(e,t,a,i,r,n,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,a?e._writev(r,t.onwrite):e._write(r,n,t.onwrite),t.sync=!1}function y(e,t,a,i){a||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),S(e,t)}function g(e,t){t.bufferProcessing=!0;var a=t.bufferedRequest;if(e._writev&&a&&a.next){var i=t.bufferedRequestCount,r=new Array(i),s=t.corkedRequestsFree;s.entry=a;for(var o=0,l=!0;a;)r[o]=a,a.isBuf||(l=!1),a=a.next,o+=1;r.allBuffers=l,b(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;a;){var c=a.chunk,u=a.encoding,d=a.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,u,d),a=a.next,t.bufferedRequestCount--,t.writing)break}null===a&&(t.lastBufferedRequest=null)}t.bufferedRequest=a,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(a){t.pendingcb--,a&&e.emit("error",a),t.prefinished=!0,e.emit("prefinish"),S(e,t)})}function S(e,t){var a=w(t);return a&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),a}l.inherits(_,u),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!m.call(this,e)||this===_&&(e&&e._writableState instanceof v)}})):m=function(e){return e instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(e,t,a){var i,n=this._writableState,s=!1,o=!n.objectMode&&(i=e,d.isBuffer(i)||i instanceof p);return o&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(a=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof a&&(a=h),n.ended?function(e,t){var a=new Error("write after end");e.emit("error",a),r.nextTick(t,a)}(this,a):(o||function(e,t,a,i){var n=!0,s=!1;return null===a?s=new TypeError("May not write null values to stream"):"string"==typeof a||void 0===a||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),r.nextTick(i,s),n=!1),n}(this,n,e,a))&&(n.pendingcb++,s=function(e,t,a,i,r,n){if(!a){var s=function(e,t,a){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,a));return t}(t,i,r);i!==s&&(a=!0,r="buffer",i=s)}var o=t.objectMode?1:i.length;t.length+=o;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:a,callback:n,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,o,i,r,n);return l}(this,n,o,e,t,a)),s},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||g(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,a){a(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(e,t,a){var i=this._writableState;"function"==typeof e?(a=e,e=null,t=null):"function"==typeof t&&(a=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,a){t.ending=!0,S(e,t),a&&(t.finished?r.nextTick(a):e.once("finish",a));t.ended=!0,e.writable=!1}(this,i,a)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=f.destroy,_.prototype._undestroy=f.undestroy,_.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,a("W2nU"),a("DuR2"))},"7uwh":function(e,t,a){e.exports=a.p+"static/img/a-open7.557d195.png"},"87vf":function(e,t,a){e.exports=a("7dSG")},"8Sok":function(e,t,a){e.exports=a.p+"static/img/window_slide8.4a6e0c8.png"},"96da":function(e,t,a){e.exports=a.p+"static/img/window_slide2.11497ad.png"},"98P7":function(e,t){},"9DG0":function(e,t,a){e.exports=r;var i=a("vzCy").EventEmitter;function r(){i.call(this)}a("LC74")(r,i),r.Readable=a("cSWu"),r.Writable=a("87vf"),r.Duplex=a("SDM6"),r.Transform=a("4/4u"),r.PassThrough=a("/MLu"),r.Stream=r,r.prototype.pipe=function(e,t){var a=this;function r(t){e.writable&&!1===e.write(t)&&a.pause&&a.pause()}function n(){a.readable&&a.resume&&a.resume()}a.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(a.on("end",o),a.on("close",l));var s=!1;function o(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){a.removeListener("data",r),e.removeListener("drain",n),a.removeListener("end",o),a.removeListener("close",l),a.removeListener("error",c),e.removeListener("error",c),a.removeListener("end",u),a.removeListener("close",u),e.removeListener("close",u)}return a.on("error",c),e.on("error",c),a.on("end",u),a.on("close",u),e.on("close",u),e.emit("pipe",a),e}},"9vLa":function(e,t,a){(function(t){var i;i=function(e){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,i=l(e);if(t){var r=l(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,a)}}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=p(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw n}}}}var h,v;function _(e){if(h){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];h.apply(void 0,[e].concat(a))}}function b(e){if(v){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];v.apply(void 0,[e].concat(a))}}var y=function(){function e(t){i(this,e),this.payload=t,this.nri=(96&this.payload[0])>>5,this.ntype=31&this.payload[0],this.isvcl=1==this.ntype||5==this.ntype,this.stype="",this.isfmb=!1}return n(e,[{key:"toString",value:function(){return"".concat(e.type(this),": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri}},{key:"type",value:function(){return this.ntype}},{key:"isKeyframe",value:function(){return this.ntype===e.IDR}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var e=new Uint8Array(this.getSize());return new DataView(e.buffer).setUint32(0,this.getSize()-4),e.set(this.getPayload(),4),e}}],[{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var t;return s(t={},e.IDR,"IDR"),s(t,e.SEI,"SEI"),s(t,e.SPS,"SPS"),s(t,e.PPS,"PPS"),s(t,e.NDR,"NDR"),s(t,e.AUD,"AUD"),t}},{key:"type",value:function(t){return t.ntype in e.TYPES?e.TYPES[t.ntype]:"UNKNOWN"}}]),e}();function g(e,t){var a=new Uint8Array((0|e.byteLength)+(0|t.byteLength));return a.set(e,0),a.set(t,0|e.byteLength),a}var w=function(){function e(t){i(this,e),this.data=t,this.index=0,this.bitLength=8*t.byteLength}return n(e,[{key:"setData",value:function(e){this.data=e,this.index=0,this.bitLength=8*e.byteLength}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}},{key:"skipBits",value:function(e){if(this.bitsAvailable<e)return!1;this.index+=e}},{key:"readBits",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getBits(e,this.index,t)}},{key:"getBits",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.bitsAvailable<e)return 0;var i=t%8,r=this.data[t/8|0]&255>>>i,n=8-i;if(n>=e)return a&&(this.index+=e),r>>n-e;a&&(this.index+=n);var s=e-n;return r<<s|this.getBits(s,t+n,a)}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitLength-this.index;++e)if(0!==this.getBits(1,this.index+e,!1))return this.index+=e,e;return e}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readBits(8*e)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}}]),e}(),C=function(){function e(t){i(this,e),this.remuxer=t,this.track=t.mp4track}return n(e,[{key:"parseSPS",value:function(t){var a=e.readSPS(new Uint8Array(t));this.track.fps=a.fps,this.track.width=a.width,this.track.height=a.height,this.track.sps=[new Uint8Array(t)],this.track.codec="avc1.";for(var i=new DataView(t.buffer,t.byteOffset+1,4),r=0;r<3;++r){var n=i.getUint8(r).toString(16);n.length<2&&(n="0"+n),this.track.codec+=n}}},{key:"parsePPS",value:function(e){this.track.pps=[new Uint8Array(e)]}},{key:"parseNAL",value:function(e){if(!e)return!1;var t=!1;switch(e.type()){case y.IDR:case y.NDR:t=!0;break;case y.PPS:this.track.pps||(this.parsePPS(e.getPayload()),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),t=!0;break;case y.SPS:this.track.sps||(this.parseSPS(e.getPayload()),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),t=!0;break;case y.AUD:_("AUD - ignoing");break;case y.SEI:_("SEI - ignoing")}return t}}],[{key:"extractNALu",value:function(e){for(var t,a,i=0,r=e.byteLength,n=0,s=[],o=0;i<r;)switch(t=e[i++],n){case 0:0===t&&(n=1);break;case 1:n=0===t?2:0;break;case 2:case 3:0===t?n=3:1===t&&i<r?(o!=i-n-1&&s.push(e.subarray(o,i-n-1)),o=i,n=0):n=0}return o<r&&(a=e.subarray(o,r)),[s,a]}},{key:"skipScalingList",value:function(e,t){for(var a=8,i=8,r=0;r<t;r++)0!==i&&(i=(a+e.readEG()+256)%256),a=0===i?a:i}},{key:"readSPS",value:function(t){var a,i,r,n,s,o,l=new w(t),c=0,u=0,d=0,p=0,m=1,f=0;l.readUByte();for(var h=[],v=t.byteLength,_=1;_<v;_++)_+2<v&&3===l.readBits(24,!1)?(h.push(l.readBits(8)),h.push(l.readBits(8)),_+=2,l.readBits(8)):h.push(l.readBits(8));if(l.setData(new Uint8Array(h)),a=l.readUByte(),l.readBits(5),l.skipBits(3),l.readUByte(),l.skipUEG(),100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a){var b=l.readUEG();if(3===b&&l.skipBits(1),l.skipUEG(),l.skipUEG(),l.skipBits(1),l.readBoolean()){o=3!==b?8:12;for(var y=0;y<o;++y)l.readBoolean()&&(y<6?e.skipScalingList(l,16):e.skipScalingList(l,64))}}l.skipUEG();var g=l.readUEG();if(0===g)l.readUEG();else if(1===g){l.skipBits(1),l.skipEG(),l.skipEG(),i=l.readUEG();for(var C=0;C<i;++C)l.skipEG()}if(l.skipUEG(),l.skipBits(1),r=l.readUEG(),n=l.readUEG(),0===(s=l.readBits(1))&&l.skipBits(1),l.skipBits(1),l.readBoolean()&&(c=l.readUEG(),u=l.readUEG(),d=l.readUEG(),p=l.readUEG()),l.readBoolean()){if(l.readBoolean()){var S;switch(l.readUByte()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[l.readUByte()<<8|l.readUByte(),l.readUByte()<<8|l.readUByte()]}S&&S[0]>0&&S[1]>0&&(m=S[0]/S[1])}if(l.readBoolean()&&l.skipBits(1),l.readBoolean()&&(l.skipBits(4),l.readBoolean()&&l.skipBits(24)),l.readBoolean()&&(l.skipUEG(),l.skipUEG()),l.readBoolean()){var x=l.readUInt(),k=l.readUInt();l.readBoolean()&&(f=k/(2*x))}}return{fps:f>0?f:void 0,width:Math.ceil((16*(r+1)-2*c-2*u)*m),height:(2-s)*(n+1)*16-(s?2:4)*(d+p)}}},{key:"parseHeader",value:function(e){var t=new w(e.getPayload());t.readUByte(),e.isfmb=0===t.readUEG(),e.stype=t.readUEG()}}]),e}(),S=function(){function e(t){i(this,e),this.remuxer=t,this.track=t.mp4track}return n(e,[{key:"extractAAC",value:function(t){var a,i,r=0,n=t.byteLength,s=[];if(!e.isAACPattern(t))return b("Invalid ADTS audio format"),s;for(a=e.getHeaderLength(t),this.aacHeader||(this.aacHeader=t.subarray(0,a));r<n;)i=e.getFrameLength(t),s.push(t.subarray(a,i)),t=t.slice(i),r+=i;return s}},{key:"setAACConfig",value:function(){var e,t,a,i=new Uint8Array(2),r=this.aacHeader;r&&(e=1+((192&r[2])>>>6),t=(60&r[2])>>>2,a=(1&r[2])<<2,a|=(192&r[3])>>>6,i[0]=e<<3,i[0]|=(14&t)>>1,i[1]|=(1&t)<<7,i[1]|=a<<3,this.track.codec="mp4a.40."+e,this.track.channelCount=a,this.track.config=i,this.remuxer.readyToDecode=!0)}}],[{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getHeaderLength",value:function(e){return 1&e[1]?7:9}},{key:"getFrameLength",value:function(e){return(3&e[3])<<11|e[4]<<3|(224&e[5])>>>5}},{key:"isAACPattern",value:function(e){return 255===e[0]&&240==(240&e[1])&&0==(6&e[1])}}]),e}(),x=function(){function e(t){i(this,e),this.listener={},this.type=""|t}return n(e,[{key:"on",value:function(e,t){return this.listener[e]||(this.listener[e]=[]),this.listener[e].push(t),!0}},{key:"off",value:function(e,t){if(this.listener[e]){var a=this.listener[e].indexOf(t);return a>-1&&this.listener[e].splice(a,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(e,t){return!!this.listener[e]&&(this.listener[e].map(function(e){e.apply(null,[t])}),!0)}}]),e}(),k=function(){function e(){i(this,e)}return n(e,null,[{key:"init",value:function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var a=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:a,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=n,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))}},{key:"box",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];for(var r,n=8,s=a.length,o=s;s--;)n+=a[s].byteLength;for((r=new Uint8Array(n))[0]=n>>24&255,r[1]=n>>16&255,r[2]=n>>8&255,r[3]=255&n,r.set(e,4),s=0,n=8;s<o;++s)r.set(a[s],n),n+=a[s].byteLength;return r}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,a){return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,a,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,a))}},{key:"moov",value:function(t,a,i){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(i,a)].concat(n).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var a=t.length,i=[];a--;)i[a]=e.trex(t[a]);return e.box.apply(null,[e.types.mvex].concat(i))}},{key:"mvhd",value:function(t,a){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,a>>24&255,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,i)}},{key:"sdtp",value:function(t){var a,i,r=t.samples||[],n=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)a=r[i].flags,n[i+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return e.box(e.types.sdtp,n)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var a,i,r,n=[],s=[];for(a=0;a<t.sps.length;a++)r=(i=t.sps[a]).byteLength,n.push(r>>>8&255),n.push(255&r),n=n.concat(Array.prototype.slice.call(i));for(a=0;a<t.pps.length;a++)r=(i=t.pps[a]).byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(i));var o=e.box(e.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(s))),l=t.width,c=t.height;return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var t=e.config.byteLength,a=new Uint8Array(26+t+3);return a.set([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5,t]),a.set(e.config,26),a.set([6,1,2],26+t),a}},{key:"mp4a",value:function(t){var a=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,a>>8&255,255&a,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"stsd",value:function(t){return"audio"===t.type?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var a=t.id,i=t.duration,r=t.width,n=t.height,s=t.volume;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,s>>0&255,s%1*10>>0&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,n>>8&255,255&n,0,0]))}},{key:"traf",value:function(t,a){var i=e.sdtp(t),r=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.trun(t,i.length+16+16+8+16+8+8),i)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var a=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,a){var i,r,n,s,o,l,c=t.samples||[],u=c.length,d=12+16*u,p=new Uint8Array(d);for(a+=8+d,p.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,a>>>24&255,a>>>16&255,a>>>8&255,255&a],0),i=0;i<u;i++)n=(r=c[i]).duration,s=r.size,o=r.flags,l=r.cts,p.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,p)}},{key:"initSegment",value:function(t,a,i){e.types||e.init();var r,n=e.moov(t,a,i);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r}}]),e}(),M=1,F=function(){function e(){i(this,e)}return n(e,[{key:"flush",value:function(){this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!(!this.readyToDecode||!this.samples.length)||null}}],[{key:"getTrackID",value:function(){return M++}}]),e}(),D=function(e){o(a,F);var t=d(a);function a(e){var r;return i(this,a),(r=t.call(this)).readyToDecode=!1,r.nextDts=0,r.dts=0,r.mp4track={id:F.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:e,duration:e,samples:[],config:"",codec:""},r.samples=[],r.aac=new S(u(r)),r}return n(a,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale,this.nextDts=0,this.dts=0}},{key:"remux",value:function(e){if(e.length>0)for(var t=0;t<e.length;t++){var a=e[t],i=a.units,r=i.byteLength;this.samples.push({units:i,size:r,duration:a.duration}),this.mp4track.len+=r,this.readyToDecode||this.aac.setAACConfig()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var e,t,a=new Uint8Array(this.mp4track.len),i=0,r=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var n=this.samples.shift();n.units,(t=n.duration)<=0?(_("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(t)),this.mp4track.len-=n.size):(this.nextDts+=t,e={size:n.size,duration:t,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},a.set(n.units,i),i+=n.size,r.push(e))}return r.length?new Uint8Array(a.buffer,0,this.mp4track.len):null}},{key:"getAacParser",value:function(){return this.aac}}]),a}(),L=function(e){o(a,F);var t=d(a);function a(e){var r;return i(this,a),(r=t.call(this)).readyToDecode=!1,r.nextDts=0,r.dts=0,r.mp4track={id:F.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",fps:30,width:0,height:0,timescale:e,duration:e,samples:[]},r.samples=[],r.h264=new C(u(r)),r}return n(a,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps="",this.nextDts=0,this.dts=0}},{key:"remux",value:function(e){var t,a=f(e);try{for(a.s();!(t=a.n()).done;){var i,r=t.value,n=[],s=0,o=f(r.units);try{for(o.s();!(i=o.n()).done;){var l=i.value;this.h264.parseNAL(l)&&(n.push(l),s+=l.getSize())}}catch(e){o.e(e)}finally{o.f()}n.length>0&&this.readyToDecode&&(this.mp4track.len+=s,this.samples.push({units:n,size:s,keyFrame:r.keyFrame,duration:r.duration,compositionTimeOffset:r.compositionTimeOffset}))}}catch(e){a.e(e)}finally{a.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var e,t,a=new Uint8Array(this.mp4track.len),i=0,r=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var n=this.samples.shift(),s=n.units;if((t=n.duration)<=0)_("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(t)),this.mp4track.len-=n.size;else{this.nextDts+=t,e={size:n.size,duration:t,cts:n.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:n.keyFrame?0:1,dependsOn:n.keyFrame?2:1}};var o,l=f(s);try{for(l.s();!(o=l.n()).done;){var c=o.value;a.set(c.getData(),i),i+=c.getSize()}}catch(e){l.e(e)}finally{l.f()}r.push(e)}}return r.length?new Uint8Array(a.buffer,0,this.mp4track.len):null}}]),a}(),N=function(e){o(a,x);var t=d(a);function a(e){var r;return i(this,a),(r=t.call(this,"remuxer")).initialized=!1,r.trackTypes=[],r.tracks={},r.seq=1,r.env=e,r.timescale=1e3,r.mediaDuration=0,r.aacParser=null,r}return n(a,[{key:"addTrack",value:function(e){if("video"!==e&&"both"!==e||(this.tracks.video=new L(this.timescale),this.trackTypes.push("video")),"audio"===e||"both"===e){var t=new D(this.timescale);this.aacParser=t.getAacParser(),this.tracks.audio=t,this.trackTypes.push("audio")}}},{key:"reset",value:function(){var e,t=f(this.trackTypes);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.tracks[a].resetTrack()}}catch(e){t.e(e)}finally{t.f()}this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(this.initialized){var e,t=f(this.trackTypes);try{for(t.s();!(e=t.n()).done;){var a=e.value,i=this.tracks[a],r=i.getPayload();if(r&&r.byteLength){var n={type:a,payload:g(k.moof(this.seq,i.dts,i.mp4track),k.mdat(r)),dts:i.dts};"video"===a&&(n.fps=i.mp4track.fps),this.dispatch("buffer",n);var s=(o=i.dts/this.timescale,l=void 0,void 0,void 0,d=void 0,d="",l=Math.floor(o),(c=parseInt(l/3600,10)%24)>0&&(d+=(c<10?"0"+c:c)+":"),d+=((u=parseInt(l/60,10)%60)<10?"0"+u:u)+":"+((l=l<0?0:l%60)<10?"0"+l:l));_("put segment (".concat(a,"): dts: ").concat(i.dts," frames: ").concat(i.mp4track.samples.length," second: ").concat(s)),i.flush(),this.seq++}}}catch(e){t.e(e)}finally{t.f()}}else this.isReady()&&(this.dispatch("ready"),this.initSegment(),this.initialized=!0,this.flush());var o,l,c,u,d}},{key:"initSegment",value:function(){var e,t=[],a=f(this.trackTypes);try{for(a.s();!(e=a.n()).done;){var i=e.value,r=this.tracks[i];if("browser"==this.env){var n={type:i,payload:k.initSegment([r.mp4track],this.mediaDuration,this.timescale)};this.dispatch("buffer",n)}else t.push(r.mp4track)}}catch(e){a.e(e)}finally{a.f()}if("node"==this.env){var s={type:"all",payload:k.initSegment(t,this.mediaDuration,this.timescale)};this.dispatch("buffer",s)}_("Initial segment generated.")}},{key:"isReady",value:function(){var e,t=f(this.trackTypes);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(!this.tracks[a].readyToDecode||!this.tracks[a].samples.length)return!1}}catch(e){t.e(e)}finally{t.f()}return!0}},{key:"remux",value:function(e){var t,a=f(this.trackTypes);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=e[i];"audio"===i&&this.tracks.video&&!this.tracks.video.readyToDecode||r.length>0&&this.tracks[i].remux(r)}}catch(e){a.e(e)}finally{a.f()}this.flush()}}]),a}(),T=function(e){o(a,x);var t=d(a);function a(e,r){var n;return i(this,a),(n=t.call(this,"buffer")).type=r,n.queue=new Uint8Array,n.cleaning=!1,n.pendingCleaning=0,n.cleanOffset=30,n.cleanRanges=[],n.sourceBuffer=e,n.sourceBuffer.addEventListener("updateend",function(){n.pendingCleaning>0&&(n.initCleanup(n.pendingCleaning),n.pendingCleaning=0),n.cleaning=!1,n.cleanRanges.length&&n.doCleanup()}),n.sourceBuffer.addEventListener("error",function(){n.dispatch("error",{type:n.type,name:"buffer",error:"buffer error"})}),n}return n(a,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(this.cleanRanges.length){var e=this.cleanRanges.shift();_("".concat(this.type," remove range [").concat(e[0]," - ").concat(e[1],")")),this.cleaning=!0,this.sourceBuffer.remove(e[0],e[1])}else this.cleaning=!1}},{key:"initCleanup",value:function(e){try{if(this.sourceBuffer.updating)return void(this.pendingCleaning=e);if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var t=0;t<this.sourceBuffer.buffered.length;++t){var a=this.sourceBuffer.buffered.start(t),i=this.sourceBuffer.buffered.end(t);e-a>this.cleanOffset&&a<(i=e-this.cleanOffset)&&this.cleanRanges.push([a,i])}this.doCleanup()}}catch(e){b("Error occured while cleaning ".concat(this.type," buffer - ").concat(e.name,": ").concat(e.message))}}},{key:"doAppend",value:function(){if(this.queue.length&&this.sourceBuffer&&!this.sourceBuffer.updating)try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(t){var e="unexpectedError";"QuotaExceededError"===t.name?(_("".concat(this.type," buffer quota full")),e="QuotaExceeded"):(b("Error occured while appending ".concat(this.type," buffer - ").concat(t.name,": ").concat(t.message)),e="InvalidStateError"),this.dispatch("error",{type:this.type,name:e,error:"buffer error"})}}},{key:"feed",value:function(e){this.queue=g(this.queue,e)}}]),a}();return function(r){o(l,x);var s=d(l);function l(e){var r;return i(this,l),(r=s.call(this,"jmuxer")).isReset=!1,r.options=Object.assign({},{node:"",mode:"both",flushingTime:500,maxDelay:500,clearBuffer:!0,fps:30,readFpsFromTrack:!1,debug:!1,onReady:function(){},onError:function(){},onMissingVideoFrames:function(){},onMissingAudioFrames:function(){}},e),r.env="object"===(void 0===t?"undefined":a(t))&&"undefined"==typeof window?"node":"browser",r.options.debug&&(h=console.log,v=console.error),r.options.fps||(r.options.fps=30),r.frameDuration=1e3/r.options.fps|0,r.remuxController=new N(r.env),r.remuxController.addTrack(r.options.mode),r.initData(),r.remuxController.on("buffer",r.onBuffer.bind(u(r))),"browser"==r.env&&(r.remuxController.on("ready",r.createBuffer.bind(u(r))),r.initBrowser()),r}return n(l,[{key:"initData",value:function(){this.lastCleaningTime=Date.now(),this.kfPosition=[],this.kfCounter=0,this.pendingUnits={},this.remainingData=new Uint8Array,this.startInterval()}},{key:"initBrowser",value:function(){"string"==typeof this.options.node&&""==this.options.node&&b("no video element were found to render, provide a valid video element"),this.node="string"==typeof this.options.node?document.getElementById(this.options.node):this.options.node,this.mseReady=!1,this.setupMSE()}},{key:"createStream",value:function(){var t=this.feed.bind(this),a=this.destroy.bind(this);return this.stream=new e.Duplex({writableObjectMode:!0,read:function(e){},write:function(e,a,i){t(e),i()},final:function(e){a(),e()}}),this.stream}},{key:"setupMSE",value:function(){if(window.MediaSource=window.MediaSource||window.WebKitMediaSource,!window.MediaSource)throw"Oops! Browser does not support media source extension.";this.isMSESupported=!!window.MediaSource,this.mediaSource=new MediaSource,this.url=URL.createObjectURL(this.mediaSource),this.node.src=this.url,this.mseEnded=!1,this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"endMSE",value:function(){if(!this.mseEnded)try{this.mseEnded=!0,this.mediaSource.endOfStream()}catch(e){b("mediasource is not available to end")}}},{key:"feed",value:function(e){var t,a,i,r=!1,n={video:[],audio:[]};if(e&&this.remuxController){if(i=e.duration?parseInt(e.duration):0,e.video){e.video=g(this.remainingData,e.video);var s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,r,n=[],s=!0,o=!1;try{for(a=a.call(e);!(s=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(o)throw r}}return n}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(C.extractNALu(e.video),2);if(t=s[0],a=s[1],this.remainingData=a||new Uint8Array,!(t.length>0))return b("Failed to extract any NAL units from video data:",a),void("function"==typeof this.options.onMissingVideoFrames&&this.options.onMissingVideoFrames.call(null,e));n.video=this.getVideoFrames(t,i,e.compositionTimeOffset),r=!0}if(e.audio){if(!((t=this.remuxController.aacParser.extractAAC(e.audio)).length>0))return b("Failed to extract audio data from:",e.audio),void("function"==typeof this.options.onMissingAudioFrames&&this.options.onMissingAudioFrames.call(null,e));n.audio=this.getAudioFrames(t,i),r=!0}r?this.remuxController.remux(n):b("Input object must have video and/or audio property. Make sure it is a valid typed array")}}},{key:"getVideoFrames",value:function(e,t,a){var i,r=this,n=[],s=[],o=0,l=!1,c=!1;this.pendingUnits.units&&(n=this.pendingUnits.units,c=this.pendingUnits.vcl,l=this.pendingUnits.keyFrame,this.pendingUnits={});var u,d=f(e);try{for(d.s();!(u=d.n()).done;){var p=u.value,m=new y(p);m.type()!==y.IDR&&m.type()!==y.NDR||C.parseHeader(m),n.length&&c&&(m.isfmb||!m.isvcl)&&(s.push({units:n,keyFrame:l}),n=[],l=!1,c=!1),n.push(m),l=l||m.isKeyframe(),c=c||m.isvcl}}catch(e){d.e(e)}finally{d.f()}if(n.length)if(t)if(c)s.push({units:n,keyFrame:l});else{var h=s.length-1;h>=0&&(s[h].units=s[h].units.concat(n))}else this.pendingUnits={units:n,keyFrame:l,vcl:c};return i=t?t/s.length|0:this.frameDuration,o=t?t-i*s.length:0,s.map(function(e){e.duration=i,e.compositionTimeOffset=a,o>0&&(e.duration++,o--),r.kfCounter++,e.keyFrame&&r.options.clearBuffer&&r.kfPosition.push(r.kfCounter*i/1e3)}),_("jmuxer: No. of frames of the last chunk: ".concat(s.length)),s}},{key:"getAudioFrames",value:function(e,t){var a,i,r=[],n=0,s=f(e);try{for(s.s();!(i=s.n()).done;){var o=i.value;r.push({units:o})}}catch(e){s.e(e)}finally{s.f()}return a=t?t/r.length|0:this.frameDuration,n=t?t-a*r.length:0,r.map(function(e){e.duration=a,n>0&&(e.duration++,n--)}),r}},{key:"destroy",value:function(){if(this.stopInterval(),this.stream&&(this.remuxController.flush(),this.stream.push(null),this.stream=null),this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var e in this.bufferControllers)this.bufferControllers[e].destroy();this.bufferControllers=null,this.endMSE()}this.node=!1,this.mseReady=!1,this.videoStarted=!1,this.mediaSource=null}},{key:"reset",value:function(){if(this.stopInterval(),this.isReset=!0,this.node.pause(),this.remuxController&&this.remuxController.reset(),this.bufferControllers){for(var e in this.bufferControllers)this.bufferControllers[e].destroy();this.bufferControllers=null,this.endMSE()}this.initData(),"browser"==this.env&&this.initBrowser(),_("JMuxer was reset")}},{key:"createBuffer",value:function(){if(this.mseReady&&this.remuxController&&this.remuxController.isReady()&&!this.bufferControllers)for(var e in this.bufferControllers={},this.remuxController.tracks){var t=this.remuxController.tracks[e];if(!l.isSupported("".concat(e,'/mp4; codecs="').concat(t.mp4track.codec,'"')))return b("Browser does not support codec"),!1;var a=this.mediaSource.addSourceBuffer("".concat(e,'/mp4; codecs="').concat(t.mp4track.codec,'"'));this.bufferControllers[e]=new T(a,e),this.bufferControllers[e].on("error",this.onBufferError.bind(this))}}},{key:"startInterval",value:function(){var e=this;this.interval=setInterval(function(){e.options.flushingTime?e.applyAndClearBuffer():e.bufferControllers&&e.cancelDelay()},this.options.flushingTime||1e3)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"cancelDelay",value:function(){if(this.node.buffered&&this.node.buffered.length>0&&!this.node.seeking){var e=this.node.buffered.end(0);e-this.node.currentTime>this.options.maxDelay/1e3&&(console.log("delay"),this.node.currentTime=e-.001)}}},{key:"releaseBuffer",value:function(){for(var e in this.bufferControllers)this.bufferControllers[e].doAppend()}},{key:"applyAndClearBuffer",value:function(){this.bufferControllers&&(this.releaseBuffer(),this.clearBuffer())}},{key:"getSafeClearOffsetOfBuffer",value:function(e){for(var t,a="audio"===this.options.mode&&e||0,i=0;i<this.kfPosition.length&&!(this.kfPosition[i]>=e);i++)t=this.kfPosition[i];return t&&(this.kfPosition=this.kfPosition.filter(function(e){return e<t&&(a=e),e>=t})),a}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var e in this.bufferControllers){var t=this.getSafeClearOffsetOfBuffer(this.node.currentTime);this.bufferControllers[e].initCleanup(t)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(e){this.options.readFpsFromTrack&&void 0!==e.fps&&this.options.fps!=e.fps&&(this.options.fps=e.fps,this.frameDuration=Math.ceil(1e3/e.fps),_("JMuxer changed FPS to ".concat(e.fps," from track data"))),"browser"==this.env?this.bufferControllers&&this.bufferControllers[e.type]&&this.bufferControllers[e.type].feed(e.payload):this.stream&&this.stream.push(e.payload),0===this.options.flushingTime&&this.applyAndClearBuffer()}},{key:"onMSEOpen",value:function(){this.mseReady=!0,URL.revokeObjectURL(this.url),"function"==typeof this.options.onReady&&this.options.onReady.call(null,this.isReset)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(e){if("QuotaExceeded"==e.name)return _("JMuxer cleaning ".concat(e.type," buffer due to QuotaExceeded error")),void this.bufferControllers[e.type].initCleanup(this.node.currentTime);"InvalidStateError"==e.name?(_("JMuxer is reseting due to InvalidStateError"),this.reset()):this.endMSE(),"function"==typeof this.options.onError&&this.options.onError.call(null,e)}}],[{key:"isSupported",value:function(e){return window.MediaSource&&window.MediaSource.isTypeSupported(e)}}]),l}()},e.exports=i(a("9DG0"))}).call(t,a("W2nU"))},"AQ/u":function(e,t){},AubN:function(e,t,a){e.exports=a.p+"static/img/wind_4.a19b8cf.png"},D1Va:function(e,t,a){"use strict";e.exports=n;var i=a("DsFX"),r=Object.create(a("jOgh"));function n(e){if(!(this instanceof n))return new n(e);i.call(this,e),this._transformState={afterTransform:function(e,t){var a=this._transformState;a.transforming=!1;var i=a.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));a.writechunk=null,a.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush(function(t,a){o(e,t,a)}):o(this,null,null)}function o(e,t,a){if(t)return e.emit("error",t);if(null!=a&&e.push(a),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}r.inherits=a("LC74"),r.inherits(n,i),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},n.prototype._transform=function(e,t,a){throw new Error("_transform() is not implemented")},n.prototype._write=function(e,t,a){var i=this._transformState;if(i.writecb=a,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},n.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},n.prototype._destroy=function(e,t){var a=this;i.prototype._destroy.call(this,e,function(e){t(e),a.emit("close")})}},Dcnk:function(e,t,a){e.exports=a.p+"static/img/window_slide7.5366758.png"},DfYH:function(e,t){},DsFX:function(e,t,a){"use strict";var i=a("ypnx"),r=Object.keys||function(e){var t=[];for(var a in e)t.push(a);return t};e.exports=d;var n=Object.create(a("jOgh"));n.inherits=a("LC74");var s=a("Rt1F"),o=a("7dSG");n.inherits(d,s);for(var l=r(o.prototype),c=0;c<l.length;c++){var u=l[c];d.prototype[u]||(d.prototype[u]=o.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i.nextTick(m,this)}function m(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},E8Um:function(e,t){},GJwc:function(e,t,a){e.exports=a.p+"static/img/redlight.5bb03d8.png"},H2M5:function(e,t){},LC74:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}}},Mw9F:function(e,t,a){e.exports=a.p+"static/img/b-open7.3325fbd.png"},R1kF:function(e,t){},RPIr:function(e,t,a){var i={"./wind_1.png":"z2GJ","./wind_2.png":"yaFL","./wind_3.png":"iS1l","./wind_4.png":"AubN","./wind_5.png":"0beM","./wind_6.png":"tVyS","./wind_7.png":"yPcx","./wind_8.png":"e/Qp"};function r(e){return a(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(i)},r.resolve=n,e.exports=r,r.id="RPIr"},Rt1F:function(e,t,a){"use strict";(function(t,i){var r=a("ypnx");e.exports=y;var n,s=a("sOR5");y.ReadableState=b;a("vzCy").EventEmitter;var o=function(e,t){return e.listeners(t).length},l=a("UcPO"),c=a("X3l8").Buffer,u=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var d=Object.create(a("jOgh"));d.inherits=a("LC74");var p=a(2),m=void 0;m=p&&p.debuglog?p.debuglog("stream"):function(){};var f,h=a("+HRN"),v=a("x0Ha");d.inherits(y,l);var _=["error","close","destroy","pause","resume"];function b(e,t){n=n||a("DsFX"),e=e||{};var i=t instanceof n;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=a("X4X3").StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function y(e){if(n=n||a("DsFX"),!(this instanceof y))return new y(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function g(e,t,a,i,r){var n,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var a=t.decoder.end();a&&a.length&&(t.buffer.push(a),t.length+=t.objectMode?1:a.length)}t.ended=!0,x(e)}(e,s)):(r||(n=function(e,t){var a;i=t,c.isBuffer(i)||i instanceof u||"string"==typeof t||void 0===t||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk"));var i;return a}(s,t)),n?e.emit("error",n):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),i?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!a?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):M(e,s)):w(e,s,t,!1))):i||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function w(e,t,a,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",a),e.read(0)):(t.length+=t.objectMode?1:a.length,i?t.buffer.unshift(a):t.buffer.push(a),t.needReadable&&x(e)),M(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=v.destroy,y.prototype._undestroy=v.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var a,i=this._readableState;return i.objectMode?a=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),a=!0),g(this,e,t,!1,a)},y.prototype.unshift=function(e){return g(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return f||(f=a("X4X3").StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var C=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(k,e):k(e))}function k(e){m("emit readable"),e.emit("readable"),N(e)}function M(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(F,e,t))}function F(e,t){for(var a=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(m("maybeReadMore read 0"),e.read(0),a!==t.length);)a=t.length;t.readingMore=!1}function D(e){m("readable nexttick read 0"),e.read(0)}function L(e,t){t.reading||(m("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(m("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?a=t.buffer.shift():!e||e>=t.length?(a=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):a=function(e,t,a){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():a?function(e,t){var a=t.head,i=1,r=a.data;e-=r.length;for(;a=a.next;){var n=a.data,s=e>n.length?n.length:e;if(s===n.length?r+=n:r+=n.slice(0,e),0===(e-=s)){s===n.length?(++i,a.next?t.head=a.next:t.head=t.tail=null):(t.head=a,a.data=n.slice(s));break}++i}return t.length-=i,r}(e,t):function(e,t){var a=c.allocUnsafe(e),i=t.head,r=1;i.data.copy(a),e-=i.data.length;for(;i=i.next;){var n=i.data,s=e>n.length?n.length:e;if(n.copy(a,a.length-e,0,s),0===(e-=s)){s===n.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=n.slice(s));break}++r}return t.length-=r,a}(e,t);return i}(e,t.buffer,t.decoder),a);var a}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(H,t,e))}function H(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var a=0,i=e.length;a<i;a++)if(e[a]===t)return a;return-1}y.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,a=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return m("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):x(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&A(this),null;var i,r=t.needReadable;return m("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&m("length less than watermark",r=!0),t.ended||t.reading?m("reading or ended",r=!1):r&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(a,t))),null===(i=e>0?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),a!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var a=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,m("pipe count=%d opts=%j",n.pipesCount,t);var l=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?u:y;function c(t,i){m("onunpipe"),t===a&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,m("cleanup"),e.removeListener("close",_),e.removeListener("finish",b),e.removeListener("drain",d),e.removeListener("error",v),e.removeListener("unpipe",c),a.removeListener("end",u),a.removeListener("end",y),a.removeListener("data",h),p=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function u(){m("onend"),e.end()}n.endEmitted?r.nextTick(l):a.once("end",l),e.on("unpipe",c);var d=function(e){return function(){var t=e._readableState;m("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,N(e))}}(a);e.on("drain",d);var p=!1;var f=!1;function h(t){m("ondata"),f=!1,!1!==e.write(t)||f||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==P(n.pipes,e))&&!p&&(m("false write response, pause",n.awaitDrain),n.awaitDrain++,f=!0),a.pause())}function v(t){m("onerror",t),y(),e.removeListener("error",v),0===o(e,"error")&&e.emit("error",t)}function _(){e.removeListener("finish",b),y()}function b(){m("onfinish"),e.removeListener("close",_),y()}function y(){m("unpipe"),a.unpipe(e)}return a.on("data",h),function(e,t,a){if("function"==typeof e.prependListener)return e.prependListener(t,a);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(a):e._events[t]=[a,e._events[t]]:e.on(t,a)}(e,"error",v),e.once("close",_),e.once("finish",b),e.emit("pipe",a),n.flowing||(m("pipe resume"),a.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,a={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,a),this);if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var n=0;n<r;n++)i[n].emit("unpipe",this,{hasUnpiped:!1});return this}var s=P(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,a),this)},y.prototype.on=function(e,t){var a=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&x(this):r.nextTick(D,this))}return a},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(m("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(L,e,t))}(this,e)),this},y.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,a=this._readableState,i=!1;for(var r in e.on("end",function(){if(m("wrapped end"),a.decoder&&!a.ended){var e=a.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(r){(m("wrapped data"),a.decoder&&(r=a.decoder.write(r)),!a.objectMode||null!==r&&void 0!==r)&&((a.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause())))}),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var n=0;n<_.length;n++)e.on(_[n],this.emit.bind(this,_[n]));return this._read=function(t){m("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=T}).call(t,a("DuR2"),a("W2nU"))},SDM6:function(e,t,a){e.exports=a("DsFX")},Syjc:function(e,t){},TI0c:function(e,t){},TzGF:function(e,t){},UcPO:function(e,t,a){e.exports=a("vzCy").EventEmitter},Ul8x:function(e,t){},VQTZ:function(e,t){},WoNl:function(e,t){},X3l8:function(e,t,a){var i=a("EuP9"),r=i.Buffer;function n(e,t){for(var a in e)t[a]=e[a]}function s(e,t,a){return r(e,t,a)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(n(i,t),t.Buffer=s),n(r,s),s.from=function(e,t,a){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,a)},s.alloc=function(e,t,a){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof a?i.fill(t,a):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},X4X3:function(e,t,a){"use strict";var i=a("X3l8").Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,a=function(e,t,a){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==a?a:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var a=e.toString("utf16le",t);if(a){var i=a.charCodeAt(a.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],a.slice(0,-1)}return a}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var a=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,a)}return t}function u(e,t){var a=(e.length-t)%3;return 0===a?e.toString("base64",t):(this.lastNeed=3-a,this.lastTotal=3,1===a?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-a))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}t.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,a;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";a=this.lastNeed,this.lastNeed=0}else a=0;return a<e.length?t?t+this.text(e,a):this.text(e,a):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},n.prototype.text=function(e,t){var a=function(e,t,a){var i=t.length-1;if(i<a)return 0;var r=s(t[i]);if(r>=0)return r>0&&(e.lastNeed=r-1),r;if(--i<a||-2===r)return 0;if((r=s(t[i]))>=0)return r>0&&(e.lastNeed=r-2),r;if(--i<a||-2===r)return 0;if((r=s(t[i]))>=0)return r>0&&(2===r?r=0:e.lastNeed=r-3),r;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=a;var i=e.length-(a-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},XFen:function(e,t,a){e.exports=a.p+"static/img/greenlight.c77cfb0.png"},bTUx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),r=a.n(i),n=a("exGp"),s=a.n(n),o=a("JC5E"),l=a("zL8q");const c=async(e,t,a,i,r)=>{var n={};n[t]=a;var s="command"==e?"/monitor/updateParameterValues":"/monitor/remoteOrLocal";try{const e=await o.a.post(s,{deviceTypeId:i,deviceId:r,codesAndValues:n});200==e.data.code?e.data.data[t].success?Object(l.Message)({message:"【"+e.data.data[t].parameterName+"】"+e.data.data[t].message,type:"success"}):Object(l.Message)({message:"【"+e.data.data[t].parameterName+"】"+e.data.data[t].message,type:"error"}):401!=e.data.code&&Object(l.Message)({message:e.data.msg,type:"error"})}catch(e){console.log(e)}};var u=a("mvHQ"),d=a.n(u),p=a("6RIr"),m={name:"ParamModal",props:{visible:Boolean,deviceType:String,paramsList:Array,windowIndex:[Number,String],dustNumber:Number},data:function(){return{modalWidth:"30%",damper_form:{door_delay:"",pinch_delay:"",motor_delay:"",sensor_delay:"",type:"",control_mode:"",sensor_mode:""},wind_form:{a_wind_angle:void 0,b_wind_angle:void 0,a_is_automatic:void 0,b_is_automatic:void 0},wind_one_form:{wind_angle:void 0,is_automatic:void 0},measureWind_form:{is_time:void 0,area:void 0,times:[{hour:void 0,minute:void 0},{hour:void 0,minute:void 0},{hour:void 0,minute:void 0},{hour:void 0,minute:void 0},{hour:void 0,minute:void 0},{hour:void 0,minute:void 0},{hour:void 0,minute:void 0},{hour:void 0,minute:void 0},{hour:void 0,minute:void 0},{hour:void 0,minute:void 0}]},mainLane_form:{spray_delay:void 0,dust:void 0,type:"",times:[{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0},{start_hour:void 0,start_minute:void 0,end_hour:void 0,end_minute:void 0}]},mine_form:{miner_spray:void 0,miner_space:void 0,miner_delay:void 0,frame_spray:void 0,frame_space:void 0,frame_delay:void 0,coal_spray:void 0,coal_space:void 0,coal_delay:void 0,dust_1:void 0,dust_2:void 0,dust_3:void 0},damper_window_form:{door_delay:"",pinch_delay:"",motor_delay:"",sensor_delay:"",type:"",control_mode:"",sensor_mode:""},window_form:{wind_angle:void 0,is_automatic:void 0},slide_form:{wind_length:void 0},pithead_form:{door_delay:"",pinch_delay:"",motor_delay:"",sensor_delay:""},paramsData:[],deviceParameters:[]}},watch:{deviceType:{handler:function(e){this.modalWidth="mine"==e?"45%":"measureWind"==e||"mainLane"==e?"40%":"30%"},immediate:!0},visible:{handler:function(e){e&&this.queryParaSettingValues()}}},methods:{updateVisible:function(e){this.$refs[this.deviceType].resetFields(),this.$emit("update:visible",e)},submit:function(){this.updateParaSettingValues()},queryParaSettingValues:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/monitor/queryParaSettingValues",{deviceId:Number(e.$route.params.deviceId),deviceTypeId:Number(e.$route.params.deviceTypeId)});case 3:a=t.sent,e.paramsData=a.data.data,t.t0=e.deviceType,t.next="damper"===t.t0?8:"wind"===t.t0?16:"windOne"===t.t0?21:"measureWind"===t.t0?24:"mine"===t.t0?28:"mainLane"===t.t0?41:"damperWindow"===t.t0?46:"louvre"===t.t0?54:"slide"===t.t0?57:"pithead"===t.t0?58:63;break;case 8:return e.damper_form.door_delay=e.paramsData.FM_CS_FMYS,e.damper_form.pinch_delay=e.paramsData.FM_CS_FJYS,e.damper_form.motor_delay=e.paramsData.FM_CS_DJYS,e.damper_form.sensor_delay=e.paramsData.FM_CS_CGQYS,e.damper_form.type=e.paramsData.FM_CS_TK,e.damper_form.control_mode=e.paramsData.FM_CS_KZFS,e.damper_form.sensor_mode=e.paramsData.FM_CS_CGQXHFS,t.abrupt("break",64);case 16:return e.wind_form.a_wind_angle=e.paramsData.FC_CS_JD1,e.wind_form.b_wind_angle=e.paramsData.FC_CS_JD2,e.wind_form.a_is_automatic=e.paramsData.FC_CS_ZD1,e.wind_form.b_is_automatic=e.paramsData.FC_CS_ZD2,t.abrupt("break",64);case 21:return e.wind_one_form.wind_angle=e.paramsData[41],e.wind_one_form.is_automatic=e.paramsData[74],t.abrupt("break",64);case 24:return e.measureWind_form.is_time=e.paramsData[96],e.measureWind_form.area=e.paramsData[95],e.measureWind_form.times.map(function(t,a){t.hour=e.paramsData[2*a+97],t.minute=e.paramsData[2*a+98]}),t.abrupt("break",64);case 28:return e.mine_form.miner_spray=e.paramsData.ZC_CS_GZTP,e.mine_form.miner_space=e.paramsData.ZC_CS_GZJG,e.mine_form.miner_delay=e.paramsData.ZC_CS_GZYS,e.mine_form.frame_spray=e.paramsData.ZC_CS_YJTP,e.mine_form.frame_space=e.paramsData.ZC_CS_YJJG,e.mine_form.frame_delay=e.paramsData.ZC_CS_YJYS,e.mine_form.coal_spray=e.paramsData.ZC_CS_FMSDTP,e.mine_form.coal_space=e.paramsData.ZC_CS_FMXDTP,e.mine_form.coal_delay=e.paramsData.ZC_CS_FMYS,e.mine_form.dust_1=e.paramsData.ZC_CS_FCNDSX1,e.mine_form.dust_2=e.paramsData.ZC_CS_FCNDSX2,e.mine_form.dust_3=e.paramsData.ZC_CS_FCNDSX3,t.abrupt("break",64);case 41:return e.mainLane_form.spray_delay=e.paramsData.PW_CS_PWYS,e.mainLane_form.dust=e.paramsData.PW_CS_FCNDSX,e.mainLane_form.type=e.paramsData.PW_CS_PWGNMS,e.mainLane_form.times.map(function(t,a){t.start_hour=e.paramsData["PW_CS_STARTH"+(a+1)],t.start_minute=e.paramsData["PW_CS_STARTM"+(a+1)],t.end_hour=e.paramsData["PW_CS_STOPH"+(a+1)],t.end_minute=e.paramsData["PW_CS_STOPM"+(a+1)]}),t.abrupt("break",64);case 46:return e.damper_window_form.door_delay=e.paramsData.FM_CS_FMYS,e.damper_window_form.pinch_delay=e.paramsData.FM_CS_FJYS,e.damper_window_form.motor_delay=e.paramsData.FM_CS_DJYS,e.damper_window_form.sensor_delay=e.paramsData.FM_CS_CGQYS,e.damper_window_form.type=e.paramsData.FM_CS_TK,e.damper_window_form.control_mode=e.paramsData.FM_CS_KZFS,e.damper_window_form.sensor_mode=e.paramsData.FM_CS_CGQXHFS,t.abrupt("break",64);case 54:return e.window_form.wind_angle=e.paramsData["FC_CS_JD"+e.windowIndex],e.window_form.is_automatic=e.paramsData["FC_CS_ZD"+e.windowIndex],t.abrupt("break",64);case 57:e.slide_form.wind_length=e.paramsData["FC_CS_CD"+e.windowIndex];case 58:return e.pithead_form.door_delay=e.paramsData.FFM_CS_FMYS,e.pithead_form.pinch_delay=e.paramsData.FFM_CS_FJYS,e.pithead_form.motor_delay=e.paramsData.FFM_CS_DJYS,e.pithead_form.sensor_delay=e.paramsData.FFM_CS_CGQYS,t.abrupt("break",64);case 63:return t.abrupt("break",64);case 64:t.next=69;break;case 66:t.prev=66,t.t1=t.catch(0),console.log(t.t1);case 69:case"end":return t.stop()}},t,e,[[0,66]])}))()},handleBlur:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},e.slide_form.wind_length!=e.paramsData["FC_CS_CD"+e.windowIndex]&&(a["FC_CS_CD"+e.windowIndex]=e.slide_form.wind_length),"{}"==d()(a)){t.next=12;break}return t.prev=3,t.next=6,e.$http.post("/monitor/updateParameterValues",{deviceId:Number(e.$route.params.deviceId),deviceTypeId:Number(e.$route.params.deviceTypeId),codesAndValues:a});case 6:t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:case"end":return t.stop()}},t,e,[[3,9]])}))()},updateParaSettingValues:function(){var e=this;return s()(r.a.mark(function t(){var a,i,n,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={},t.t0=e.deviceType,t.next="damper"===t.t0?4:"wind"===t.t0?12:"windOne"===t.t0?17:"measureWind"===t.t0?20:"mine"===t.t0?24:"mainLane"===t.t0?37:"damperWindow"===t.t0?42:"louvre"===t.t0?50:"slide"===t.t0?53:"pithead"===t.t0?55:60;break;case 4:return e.damper_form.door_delay!=e.paramsData.FM_CS_FMYS&&(a.FM_CS_FMYS=e.damper_form.door_delay),e.damper_form.pinch_delay!=e.paramsData.FM_CS_FJYS&&(a.FM_CS_FJYS=e.damper_form.pinch_delay),e.damper_form.motor_delay!=e.paramsData.FM_CS_DJYS&&(a.FM_CS_DJYS=e.damper_form.motor_delay),e.damper_form.sensor_delay!=e.paramsData.FM_CS_CGQYS&&(a.FM_CS_CGQYS=e.damper_form.sensor_delay),e.damper_form.type!=e.paramsData.FM_CS_TK&&(a.FM_CS_TK=e.damper_form.type),e.damper_form.control_mode!=e.paramsData.FM_CS_KZFS&&(a.FM_CS_KZFS=e.damper_form.control_mode),e.damper_form.sensor_mode!=e.paramsData.FM_CS_CGQXHFS&&(a.FM_CS_CGQXHFS=e.damper_form.sensor_mode),t.abrupt("break",61);case 12:return e.wind_form.a_wind_angle!=e.paramsData.FC_CS_JD1&&(a.FC_CS_JD1=e.wind_form.a_wind_angle),e.wind_form.b_wind_angle!=e.paramsData.FC_CS_JD2&&(a.FC_CS_JD2=e.wind_form.b_wind_angle),e.wind_form.a_is_automatic!=e.paramsData.FC_CS_ZD1&&(a.FC_CS_ZD1=e.wind_form.a_is_automatic),e.wind_form.b_is_automatic!=e.paramsData.FC_CS_ZD2&&(a.FC_CS_ZD2=e.wind_form.b_is_automatic),t.abrupt("break",61);case 17:return e.wind_one_form.wind_angle!=e.paramsData[41]&&e.compareParameter(41,e.wind_one_form.wind_angle),e.wind_one_form.is_automatic!=e.paramsData[74]&&e.compareParameter(74,e.wind_one_form.is_automatic),t.abrupt("break",61);case 20:return e.measureWind_form.is_time!=e.paramsData[96]&&e.compareParameter(96,e.measureWind_form.is_time),e.measureWind_form.area!=e.paramsData[95]&&e.compareParameter(95,e.measureWind_form.area),e.measureWind_form.times.map(function(t,a){t.hour!=e.paramsData[2*a+97]&&e.compareParameter(2*a+97,t.hour),t.minute!=e.paramsData[2*a+98]&&e.compareParameter(2*a+98,t.minute)}),t.abrupt("break",61);case 24:return e.mine_form.miner_spray!=e.paramsData.ZC_CS_GZTP&&(a.ZC_CS_GZTP=e.mine_form.miner_spray),e.mine_form.miner_space!=e.paramsData.ZC_CS_GZJG&&(a.ZC_CS_GZJG=e.mine_form.miner_space),e.mine_form.miner_delay!=e.paramsData.ZC_CS_GZYS&&(a.ZC_CS_GZYS=e.mine_form.miner_delay),e.mine_form.frame_spray!=e.paramsData.ZC_CS_YJTP&&(a.ZC_CS_YJTP=e.mine_form.frame_spray),e.mine_form.frame_space!=e.paramsData.ZC_CS_YJJG&&(a.ZC_CS_YJJG=e.mine_form.frame_space),e.mine_form.frame_delay!=e.paramsData.ZC_CS_YJYS&&(a.ZC_CS_YJYS=e.mine_form.frame_delay),e.mine_form.coal_spray!=e.paramsData.ZC_CS_FMSDTP&&(a.ZC_CS_FMSDTP=e.mine_form.coal_spray),e.mine_form.coal_space!=e.paramsData.ZC_CS_FMXDTP&&(a.ZC_CS_FMXDTP=e.mine_form.coal_space),e.mine_form.coal_delay!=e.paramsData.ZC_CS_FMYS&&(a.ZC_CS_FMYS=e.mine_form.coal_delay),e.mine_form.dust_1!=e.paramsData.ZC_CS_FCNDSX1&&(a.ZC_CS_FCNDSX1=e.mine_form.dust_1),e.mine_form.dust_2!=e.paramsData.ZC_CS_FCNDSX2&&(a.ZC_CS_FCNDSX2=e.mine_form.dust_2),e.mine_form.dust_3!=e.paramsData.ZC_CS_FCNDSX3&&(a.ZC_CS_FCNDSX3=e.mine_form.dust_3),t.abrupt("break",61);case 37:return e.mainLane_form.spray_delay!=e.paramsData.PW_CS_PWYS&&(a.PW_CS_PWYS=e.mainLane_form.spray_delay),e.mainLane_form.dust!=e.paramsData.PW_CS_FCNDSX&&(a.PW_CS_FCNDSX=e.mainLane_form.dust),e.mainLane_form.type!=e.paramsData.PW_CS_PWGNMS&&(a.PW_CS_PWGNMS=e.mainLane_form.type),e.mainLane_form.times.map(function(t,i){t.start_hour!=e.paramsData["PW_CS_STARTH"+(i+1)]&&(a["PW_CS_STARTH"+(i+1)]=t.start_hour),t.start_minute!=e.paramsData["PW_CS_STARTM"+(i+1)]&&(a["PW_CS_STARTM"+(i+1)]=t.start_minute),t.end_hour!=e.paramsData["PW_CS_STOPH"+(i+1)]&&(a["PW_CS_STOPH"+(i+1)]=t.end_hour),t.end_minute!=e.paramsData["PW_CS_STOPM"+(i+1)]&&(a["PW_CS_STOPM"+(i+1)]=t.end_minute)}),t.abrupt("break",61);case 42:return e.damper_window_form.door_delay!=e.paramsData.FM_CS_FMYS&&(a.FM_CS_FMYS=e.damper_window_form.door_delay),e.damper_window_form.pinch_delay!=e.paramsData.FM_CS_FJYS&&(a.FM_CS_FJYS=e.damper_window_form.pinch_delay),e.damper_window_form.motor_delay!=e.paramsData.FM_CS_DJYS&&(a.FM_CS_DJYS=e.damper_window_form.motor_delay),e.damper_window_form.sensor_delay!=e.paramsData.FM_CS_CGQYS&&(a.FM_CS_CGQYS=e.damper_window_form.sensor_delay),e.damper_window_form.type!=e.paramsData.FM_CS_TK&&(a.FM_CS_TK=e.damper_window_form.type),e.damper_window_form.control_mode!=e.paramsData.FM_CS_KZFS&&(a.FM_CS_KZFS=e.damper_window_form.control_mode),e.damper_window_form.sensor_mode!=e.paramsData.FM_CS_CGQXHFS&&(a.FM_CS_CGQXHFS=e.damper_window_form.sensor_mode),t.abrupt("break",61);case 50:return e.window_form.wind_angle!=e.paramsData["FC_CS_JD"+e.windowIndex]&&(a["FC_CS_JD"+e.windowIndex]=e.window_form.wind_angle),e.window_form.is_automatic!=e.paramsData["FC_CS_ZD"+e.windowIndex]&&(a["FC_CS_ZD"+e.windowIndex]=e.window_form.is_automatic),t.abrupt("break",61);case 53:return a["FC_CZ_OPEN"+e.windowIndex]=1,t.abrupt("break",61);case 55:return e.pithead_form.door_delay!=e.paramsData.FFM_CS_FMYS&&(a.FFM_CS_FMYS=e.pithead_form.door_delay),e.pithead_form.pinch_delay!=e.paramsData.FFM_CS_FJYS&&(a.FFM_CS_FJYS=e.pithead_form.pinch_delay),e.pithead_form.motor_delay!=e.paramsData.FFM_CS_DJYS&&(a.FFM_CS_DJYS=e.pithead_form.motor_delay),e.pithead_form.sensor_delay!=e.paramsData.FFM_CS_CGQYS&&(a.FFM_CS_CGQYS=e.pithead_form.sensor_delay),t.abrupt("break",61);case 60:return t.abrupt("break",61);case 61:if("{}"==d()(a)){t.next=87;break}return t.prev=62,t.next=65,e.$http.post("/monitor/updateParameterValues",{deviceId:Number(e.$route.params.deviceId),deviceTypeId:Number(e.$route.params.deviceTypeId),codesAndValues:a});case 65:if(200!=(i=t.sent).data.code){t.next=79;break}n=!0,t.t1=r.a.keys(i.data.data);case 69:if((t.t2=t.t1()).done){t.next=76;break}if(s=t.t2.value,i.data.data[s].success){t.next=74;break}return e.$message.error("【"+i.data.data[s].parameterName+"】"+i.data.data[s].message),t.abrupt("return");case 74:t.next=69;break;case 76:n&&(e.$message.success("参数保存成功"),e.updateVisible(!1)),t.next=80;break;case 79:e.$message.error(i.data.msg);case 80:t.next=85;break;case 82:t.prev=82,t.t3=t.catch(62),console.log(t.t3);case 85:t.next=88;break;case 87:e.$message.warning("没有要保存的参数");case 88:case"end":return t.stop()}},t,e,[[62,82]])}))()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"custom-modal",attrs:{title:"参数设置",visible:e.visible,width:e.modalWidth,modal:!1,"append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":e.updateVisible}},["damper"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form",attrs:{model:e.damper_form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"风门延时参数",prop:"door_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入风门延时参数（最大999）"},model:{value:e.damper_form.door_delay,callback:function(t){e.$set(e.damper_form,"door_delay",t)},expression:"damper_form.door_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"防夹延时参数",prop:"pinch_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入防夹延时参数（最大999）"},model:{value:e.damper_form.pinch_delay,callback:function(t){e.$set(e.damper_form,"pinch_delay",t)},expression:"damper_form.pinch_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"电机延时参数",prop:"motor_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入电机延时参数（最大999）"},model:{value:e.damper_form.motor_delay,callback:function(t){e.$set(e.damper_form,"motor_delay",t)},expression:"damper_form.motor_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器延时",prop:"sensor_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入传感器延时（最大999）"},model:{value:e.damper_form.sensor_delay,callback:function(t){e.$set(e.damper_form,"sensor_delay",t)},expression:"damper_form.sensor_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("毫秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"两道门同时打开",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.damper_form.type,callback:function(t){e.$set(e.damper_form,"type",t)},expression:"damper_form.type"}},[a("el-option",{attrs:{label:"禁止",value:"false"}}),e._v(" "),a("el-option",{attrs:{label:"允许",value:"true"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"控制方式",prop:"control_mode"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择控制方式"},model:{value:e.damper_form.control_mode,callback:function(t){e.$set(e.damper_form,"control_mode",t)},expression:"damper_form.control_mode"}},[a("el-option",{attrs:{label:"计数",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"延时",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器信号方式",prop:"sensor_mode"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择传感器信号方式"},model:{value:e.damper_form.sensor_mode,callback:function(t){e.$set(e.damper_form,"sensor_mode",t)},expression:"damper_form.sensor_mode"}},[a("el-option",{attrs:{label:"持续",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"脉冲",value:"0"}})],1)],1)],1):e._e(),e._v(" "),"wind"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form",attrs:{model:e.wind_form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"设置A风窗角度",prop:"a_wind_angle"}},[a("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入A风窗角度"},model:{value:e.wind_form.a_wind_angle,callback:function(t){e.$set(e.wind_form,"a_wind_angle",t)},expression:"wind_form.a_wind_angle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设置B风窗角度",prop:"b_wind_angle"}},[a("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入B风窗角度"},model:{value:e.wind_form.b_wind_angle,callback:function(t){e.$set(e.wind_form,"b_wind_angle",t)},expression:"wind_form.b_wind_angle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设置A风窗自动",prop:"a_is_automatic"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.wind_form.a_is_automatic,callback:function(t){e.$set(e.wind_form,"a_is_automatic",t)},expression:"wind_form.a_is_automatic"}},[a("el-option",{attrs:{label:"手动",value:"false"}}),e._v(" "),a("el-option",{attrs:{label:"自动",value:"true"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设置B风窗自动",prop:"b_is_automatic"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.wind_form.b_is_automatic,callback:function(t){e.$set(e.wind_form,"b_is_automatic",t)},expression:"wind_form.b_is_automatic"}},[a("el-option",{attrs:{label:"手动",value:"false"}}),e._v(" "),a("el-option",{attrs:{label:"自动",value:"true"}})],1)],1)],1):e._e(),e._v(" "),"windOne"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form",attrs:{model:e.wind_form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"设置风窗角度",prop:"wind_angle"}},[a("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入风窗角度"},model:{value:e.wind_one_form.wind_angle,callback:function(t){e.$set(e.wind_one_form,"wind_angle",t)},expression:"wind_one_form.wind_angle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设置风窗自动",prop:"is_automatic"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.wind_one_form.is_automatic,callback:function(t){e.$set(e.wind_one_form,"is_automatic",t)},expression:"wind_one_form.is_automatic"}},[a("el-option",{attrs:{label:"手动",value:"false"}}),e._v(" "),a("el-option",{attrs:{label:"自动",value:"true"}})],1)],1)],1):e._e(),e._v(" "),"measureWind"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form-measureWind",attrs:{model:e.measureWind_form,"label-position":"left","hide-required-asterisk":!0}},[a("el-form-item",{attrs:{label:"定时测风",prop:"is_time"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择测风类型"},model:{value:e.measureWind_form.is_time,callback:function(t){e.$set(e.measureWind_form,"is_time",t)},expression:"measureWind_form.is_time"}},[a("el-option",{attrs:{label:"实时测风",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"定时测风",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"截面面积",prop:"area"}},[a("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入截面面积"},model:{value:e.measureWind_form.area,callback:function(t){e.$set(e.measureWind_form,"area",t)},expression:"measureWind_form.area"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.measureWind_form.is_time,expression:"measureWind_form.is_time == '1'"}],staticClass:"form-time",attrs:{label:"时间"}},e._l(e.measureWind_form.times,function(t,i){return a("el-row",{key:i,staticClass:"item-row",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticClass:"col-form-item",attrs:{label:"小时"+(i+1),prop:"times."+i+".hour"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入小时",min:"0",max:"23"},model:{value:t.hour,callback:function(a){e.$set(t,"hour",a)},expression:"item.hour"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticClass:"col-form-item",attrs:{label:"分钟"+(i+1),prop:"times."+i+".minute"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入分钟",min:"0",max:"59"},model:{value:t.minute,callback:function(a){e.$set(t,"minute",a)},expression:"item.minute"}})],1)],1),e._v(" "),a("el-col",{staticClass:"col-icon",attrs:{span:1}})],1)}),1)],1):e._e(),e._v(" "),"mainLane"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form-mainLane",attrs:{model:e.mainLane_form,"label-position":"left","hide-required-asterisk":!0}},[a("el-form-item",{attrs:{label:"喷雾延时",prop:"spray_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入喷雾延时（最大999）",min:0,max:999},model:{value:e.mainLane_form.spray_delay,callback:function(t){e.$set(e.mainLane_form,"spray_delay",t)},expression:"mainLane_form.spray_delay"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"粉尘浓度上限",prop:"dust"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入粉尘浓度上限（最大1000）",min:0,max:1e3},model:{value:e.mainLane_form.dust,callback:function(t){e.$set(e.mainLane_form,"dust",t)},expression:"mainLane_form.dust"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"喷雾功能模式",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择喷雾功能模式"},model:{value:e.mainLane_form.type,callback:function(t){e.$set(e.mainLane_form,"type",t)},expression:"mainLane_form.type"}},[a("el-option",{attrs:{label:"大巷定时",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"大巷模式",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"转载点",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"防尘防火",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"防火",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"水电联动",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"防尘红外",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"粉尘喷雾",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"防火红外",value:"8"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.mainLane_form.type,expression:"mainLane_form.type == 0"}],staticClass:"form-time",attrs:{label:"定时列表"}},e._l(e.mainLane_form.times,function(t,i){return a("el-row",{key:i,staticClass:"item-row"},[a("el-col",{attrs:{span:2}},[e._v("\n          "+e._s(""+(i+1))+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"form-item-time",attrs:{prop:"times."+i+".start_hour"}},[a("el-input",{staticClass:"input-time",attrs:{type:"number",min:0,max:23},model:{value:t.start_hour,callback:function(a){e.$set(t,"start_hour",a)},expression:"item.start_hour"}}),e._v(" "),a("span",[e._v("时")])],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"form-item-time",attrs:{prop:"times."+i+".start_minute"}},[a("el-input",{staticClass:"input-time",attrs:{type:"number",min:0,max:59},model:{value:t.start_minute,callback:function(a){e.$set(t,"start_minute",a)},expression:"item.start_minute"}}),e._v(" "),a("span",[e._v("分")])],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:2}},[a("span",[e._v(" —")])]),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"form-item-time",attrs:{prop:"times."+i+".end_hour"}},[a("el-input",{staticClass:"input-time",attrs:{type:"number",min:0,max:23},model:{value:t.end_hour,callback:function(a){e.$set(t,"end_hour",a)},expression:"item.end_hour"}}),e._v(" "),a("span",[e._v("时")])],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"form-item-time",attrs:{prop:"times."+i+".end_minute"}},[a("el-input",{staticClass:"input-time",attrs:{type:"number",min:0,max:59},model:{value:t.end_minute,callback:function(a){e.$set(t,"end_minute",a)},expression:"item.end_minute"}}),e._v(" "),a("span",[e._v("分")])],1)],1)],1)}),1)],1):e._e(),e._v(" "),"mine"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form form_mine",attrs:{model:e.mine_form,"label-position":"left"}},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"跟踪喷雾同喷",prop:"miner_spray"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入跟踪喷雾同喷（最大9）",min:0,max:9},model:{value:e.mine_form.miner_spray,callback:function(t){e.$set(e.mine_form,"miner_spray",t)},expression:"mine_form.miner_spray"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"跟踪喷雾间隔",prop:"miner_space"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入跟踪喷雾间隔（最大9）",min:0,max:9},model:{value:e.mine_form.miner_space,callback:function(t){e.$set(e.mine_form,"miner_space",t)},expression:"mine_form.miner_space"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"跟踪喷雾延时",prop:"miner_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入跟踪喷雾延时（最大999）",min:0,max:999},model:{value:e.mine_form.miner_delay,callback:function(t){e.$set(e.mine_form,"miner_delay",t)},expression:"mine_form.miner_delay"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"移架喷雾同喷",prop:"frame_spray"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入移架喷雾同喷（最大9）",min:0,max:9},model:{value:e.mine_form.frame_spray,callback:function(t){e.$set(e.mine_form,"frame_spray",t)},expression:"mine_form.frame_spray"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"移架喷雾间隔",prop:"frame_space"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入移架喷雾间隔（最大9）",min:0,max:9},model:{value:e.mine_form.frame_space,callback:function(t){e.$set(e.mine_form,"frame_space",t)},expression:"mine_form.frame_space"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"移架喷雾延时",prop:"frame_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入移架喷雾延时（最大999）",min:0,max:999},model:{value:e.mine_form.frame_delay,callback:function(t){e.$set(e.mine_form,"frame_delay",t)},expression:"mine_form.frame_delay"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"放煤喷雾上道同喷",prop:"coal_spray"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入放煤喷雾上道同喷（最大9）",min:0,max:9},model:{value:e.mine_form.coal_spray,callback:function(t){e.$set(e.mine_form,"coal_spray",t)},expression:"mine_form.coal_spray"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"放煤喷雾下道同喷",prop:"coal_space"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入放煤喷雾下道同喷（最大9）",min:0,max:9},model:{value:e.mine_form.coal_space,callback:function(t){e.$set(e.mine_form,"coal_space",t)},expression:"mine_form.coal_space"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"放煤喷雾延时",prop:"coal_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入放煤喷雾延时（最大999）",min:0,max:999},model:{value:e.mine_form.coal_delay,callback:function(t){e.$set(e.mine_form,"coal_delay",t)},expression:"mine_form.coal_delay"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.dustNumber>=1,expression:"dustNumber >= 1"}],attrs:{label:"粉尘浓度1上限",prop:"dust_1"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入粉尘浓度上限",min:0,max:1e3},model:{value:e.mine_form.dust_1,callback:function(t){e.$set(e.mine_form,"dust_1",t)},expression:"mine_form.dust_1"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.dustNumber>=2,expression:"dustNumber >= 2"}],attrs:{label:"粉尘浓度2上限",prop:"dust_2"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入粉尘浓度上限",min:0,max:1e3},model:{value:e.mine_form.dust_2,callback:function(t){e.$set(e.mine_form,"dust_2",t)},expression:"mine_form.dust_2"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.dustNumber,expression:"dustNumber == 3"}],attrs:{label:"粉尘浓度3上限",prop:"dust_3"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,placeholder:"请输入粉尘浓度上限",min:0,max:1e3},model:{value:e.mine_form.dust_3,callback:function(t){e.$set(e.mine_form,"dust_3",t)},expression:"mine_form.dust_3"}})],1)],1)],1)],1):e._e(),e._v(" "),"damperWindow"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form",attrs:{model:e.damper_window_form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"风门延时参数",prop:"door_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入风门延时参数（最大999）"},model:{value:e.damper_window_form.door_delay,callback:function(t){e.$set(e.damper_window_form,"door_delay",t)},expression:"damper_window_form.door_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"防夹延时参数",prop:"pinch_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入防夹延时参数（最大999）"},model:{value:e.damper_window_form.pinch_delay,callback:function(t){e.$set(e.damper_window_form,"pinch_delay",t)},expression:"damper_window_form.pinch_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"电机延时参数",prop:"motor_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入电机延时参数（最大999）"},model:{value:e.damper_window_form.motor_delay,callback:function(t){e.$set(e.damper_window_form,"motor_delay",t)},expression:"damper_window_form.motor_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器延时",prop:"sensor_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入传感器延时（最大999）"},model:{value:e.damper_window_form.sensor_delay,callback:function(t){e.$set(e.damper_window_form,"sensor_delay",t)},expression:"damper_window_form.sensor_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("毫秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"两道门同时打开",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.damper_window_form.type,callback:function(t){e.$set(e.damper_window_form,"type",t)},expression:"damper_window_form.type"}},[a("el-option",{attrs:{label:"禁止",value:"false"}}),e._v(" "),a("el-option",{attrs:{label:"允许",value:"true"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"控制方式",prop:"control_mode"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择控制方式"},model:{value:e.damper_window_form.control_mode,callback:function(t){e.$set(e.damper_window_form,"control_mode",t)},expression:"damper_window_form.control_mode"}},[a("el-option",{attrs:{label:"计数",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"延时",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器信号方式",prop:"sensor_mode"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择传感器信号方式"},model:{value:e.damper_window_form.sensor_mode,callback:function(t){e.$set(e.damper_window_form,"sensor_mode",t)},expression:"damper_window_form.sensor_mode"}},[a("el-option",{attrs:{label:"持续",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"脉冲",value:"0"}})],1)],1)],1):e._e(),e._v(" "),"louvre"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form",attrs:{model:e.window_form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"设置风窗角度",prop:"wind_angle"}},[a("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入风窗角度"},model:{value:e.window_form.wind_angle,callback:function(t){e.$set(e.window_form,"wind_angle",t)},expression:"window_form.wind_angle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设置风窗自动",prop:"is_automatic"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.window_form.is_automatic,callback:function(t){e.$set(e.window_form,"is_automatic",t)},expression:"window_form.is_automatic"}},[a("el-option",{attrs:{label:"手动",value:"false"}}),e._v(" "),a("el-option",{attrs:{label:"自动",value:"true"}})],1)],1)],1):e._e(),e._v(" "),"slide"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form",attrs:{model:e.slide_form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"设置风窗长度",prop:"wind_length"}},[a("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入风窗长度"},on:{blur:e.handleBlur},model:{value:e.slide_form.wind_length,callback:function(t){e.$set(e.slide_form,"wind_length",t)},expression:"slide_form.wind_length"}})],1)],1):e._e(),e._v(" "),"pithead"==e.deviceType?a("el-form",{ref:e.deviceType,staticClass:"form",attrs:{model:e.pithead_form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"风门延时参数",prop:"door_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入风门延时参数（最大999）"},model:{value:e.pithead_form.door_delay,callback:function(t){e.$set(e.pithead_form,"door_delay",t)},expression:"pithead_form.door_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"防夹延时参数",prop:"pinch_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入防夹延时参数（最大999）"},model:{value:e.pithead_form.pinch_delay,callback:function(t){e.$set(e.pithead_form,"pinch_delay",t)},expression:"pithead_form.pinch_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"电机延时参数",prop:"motor_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入电机延时参数（最大999）"},model:{value:e.pithead_form.motor_delay,callback:function(t){e.$set(e.pithead_form,"motor_delay",t)},expression:"pithead_form.motor_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("秒")])],1),e._v(" "),a("el-form-item",{attrs:{label:"传感器延时",prop:"sensor_delay"}},[a("el-input-number",{staticClass:"inputNumber",attrs:{"controls-position":"right","step-strictly":!0,min:0,max:999,placeholder:"请输入传感器延时（最大999）"},model:{value:e.pithead_form.sensor_delay,callback:function(t){e.$set(e.pithead_form,"sensor_delay",t)},expression:"pithead_form.sensor_delay"}}),e._v(" "),a("span",{staticClass:"form-unit"},[e._v("毫秒")])],1)],1):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.updateVisible(!1)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,f,!1,function(e){a("E8Um")},"data-v-3ff40140",null).exports,v={name:"HistoryModal",props:{visible:{type:Boolean,default:!1},paramsList:{type:Array}},data:function(){return{form_query:{param_name:"",time_period:null},tableData:[],operationData:{},pageSize:1}},watch:{visible:{handler:function(e){e&&this.queryOperationLog()},immediate:!0}},methods:{updateVisible:function(e){this.$refs.form.resetFields(),this.$emit("update:visible",e)},onSubmit:function(){this.queryOperationLog(this.form_query.time_period)},queryOperationLog:function(e){var t=this;return s()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.post("/log/queryOperationLog",{deviceId:Number(t.$route.params.deviceId),pageIndex:t.pageSize,parameterName:t.form_query.param_name,time:e});case 3:i=a.sent,t.tableData=i.data.data.records,t.operationData=i.data.data,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,t,[[0,8]])}))()},getTime:function(e){var t=new Date(parseInt(e));return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+"   "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},handleCurrentChange:function(){this.queryOperationLog()}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"custom-modal",attrs:{visible:e.visible,width:"60%",modal:!1,"close-on-click-modal":!1},on:{"update:visible":e.updateVisible}},[a("el-form",{ref:"form",attrs:{inline:!0,model:e.form_query}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"参数名称",clearable:"",size:"medium"},model:{value:e.form_query.param_name,callback:function(t){e.$set(e.form_query,"param_name",t)},expression:"form_query.param_name"}})],1),e._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange","value-format":"timestamp","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],size:"medium"},model:{value:e.form_query.time_period,callback:function(t){e.$set(e.form_query,"time_period",t)},expression:"form_query.time_period"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"baseDeviceTypeParameter.baseDeviceTypeParameterName",label:"参数名称","min-width":"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"baseDeviceTypeParameter.address",label:"操作地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"baseDeviceTypeParameter.type.name",label:"数值类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"controlMode",label:"控制方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.controlMode.name+"控制"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operationValue",label:"操作值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.userTrueName",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"timeMillis",label:"操作时间","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getTime(t.row.timeMillis)))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"box-page",attrs:{"current-page":e.pageSize,"page-size":10,layout:"total, prev, pager, next",total:e.operationData.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageSize=t},"update:current-page":function(t){e.pageSize=t}}})],1)},staticRenderFns:[]};var b=a("VU/8")(v,_,!1,function(e){a("wG7V")},"data-v-46c6be34",null).exports,y=a("9vLa"),g=a.n(y),w={name:"DamperInfo",components:{ParamModal:h,HistoryModal:b},props:{cameraList:Array,paramSignal:{type:Object,default:function(){return{}}},switchLog:Object},data:function(){return{isOpenA:!1,isClickA:!0,isOpenB:!1,isClickB:!0,paramVisible:!1,historyVisible:!1,tableData:[],socketList:[],timerList:[]}},watch:{"paramSignal.FM_XH_KB1":{handler:function(e){JSON.parse(e)?this.closeDoorA():this.openDoorA()}},"paramSignal.FM_XH_KB2":{handler:function(e){JSON.parse(e)?this.closeDoorB():this.openDoorB()}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){this.videoPlay()},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()}),this.timerList.map(function(e){clearTimeout(e)})},methods:{headerCellStyle:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);return t[0].colSpan=0,t[1].colSpan=2,0===a?{display:"none"}:{background:"rgba(20, 128, 240, 0.8) !important"}},openDoorA:function(){var e=this;if(!this.isOpenA&&this.isClickA){this.isOpenA=!0,this.isClickA=!1,this.$refs.doorA.classList.remove("door-close-a"),this.$refs.doorA.classList.add("door-open-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-open-a"),e.$refs.doorA.style.backgroundImage="url("+a("7uwh")+")",e.isClickA=!0},1900);this.timerList.push(t)}},closeDoorA:function(){var e=this;if(this.isOpenA&&this.isClickA){this.isOpenA=!1,this.isClickA=!1,this.$refs.doorA.classList.remove("door-open-a"),this.$refs.doorA.classList.add("door-close-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-close-a"),e.$refs.doorA.style.backgroundImage="url("+a("xdPP")+")",e.isClickA=!0},1900);this.timerList.push(t)}},openDoorB:function(){var e=this;if(!this.isOpenB&&this.isClickB){this.isOpenB=!0,this.isClickB=!1,this.$refs.doorB.classList.remove("door-close-b"),this.$refs.doorB.classList.add("door-open-b");var t=setTimeout(function(){e.$refs.doorB.classList.remove("door-open-b"),e.$refs.doorB.style.backgroundImage="url("+a("Mw9F")+")",e.isClickB=!0},1900);this.timerList.push(t)}},closeDoorB:function(){var e=this;if(this.isOpenB&&this.isClickB){this.isOpenB=!1,this.isClickB=!1,this.$refs.doorB.classList.remove("door-open-b"),this.$refs.doorB.classList.add("door-close-b");var t=setTimeout(function(){e.$refs.doorB.classList.remove("door-close-b"),e.$refs.doorB.style.backgroundImage="url("+a("cFSg")+")",e.isClickB=!0},1900);this.timerList.push(t)}},openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},remoteControl:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("control",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},startPlay:function(){var e=this;this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})}}},C={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"info-flex"},[i("div",{staticClass:"flex-left"},[i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控1")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控2")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video2",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video2",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控3")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video3",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video3",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控4")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video4",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video4",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])])]),e._v(" "),i("div",{staticClass:"flex-center"},[i("div",{staticClass:"door-box"},[i("div",{staticClass:"door-img"}),e._v(" "),i("div",{ref:"doorA",staticClass:"door-gif-a"}),e._v(" "),i("div",{ref:"doorB",staticClass:"door-gif-b"}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDCGQ1,expression:"paramSignal.FM_XH_YDCGQ1 == 'true'"}],staticClass:"door-shan shan1",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDCGQ2,expression:"paramSignal.FM_XH_YDCGQ2 == 'true'"}],staticClass:"door-shan shan2",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDCGQ1,expression:"paramSignal.FM_XH_EDCGQ1 == 'true'"}],staticClass:"door-shan shan3",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDMCHQ2,expression:"paramSignal.FM_XH_EDMCHQ2 == 'true'"}],staticClass:"door-shan shan4",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{staticClass:"door-a-light",attrs:{src:a("XFen"),alt:""}}),e._v(" "),i("img",{staticClass:"door-b-light",attrs:{src:a("XFen"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDFJ,expression:"paramSignal.FM_XH_YDFJ == 'true'"}],staticClass:"warning-a-light",attrs:{src:a("rLGt"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDFJ,expression:"paramSignal.FM_XH_EDFJ == 'true'"}],staticClass:"warning-b-light",attrs:{src:a("rLGt"),alt:""}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.paramSignal.FM_XH_YDYS,expression:"paramSignal.FM_XH_YDYS != '0'"}],staticClass:"countdown-a"},[e._v(e._s(e.paramSignal.FM_XH_YDYS))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.paramSignal.FM_XH_EDYS,expression:"paramSignal.FM_XH_EDYS != '0'"}],staticClass:"countdown-b"},[e._v(e._s(e.paramSignal.FM_XH_EDYS))])]),e._v(" "),i("div",{staticClass:"operate-layout"},[i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("远程控制")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{staticStyle:{color:"#fff"}},[e._v(e._s("0"==e.paramSignal.FM_XH_CM||"false"==e.paramSignal.FM_XH_CM?"就地模式":"1"==e.paramSignal.FM_XH_CM||"true"==e.paramSignal.FM_XH_CM?"远程模式":""))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.paramSignal.FM_XH_CM||"false"==e.paramSignal.FM_XH_CM,expression:"paramSignal.FM_XH_CM == '0' || paramSignal.FM_XH_CM == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.remoteControl("FM_CS_CM",1)}}},[e._v("远程启动")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.paramSignal.FM_XH_CM||"true"==e.paramSignal.FM_XH_CM,expression:"paramSignal.FM_XH_CM == '1' || paramSignal.FM_XH_CM == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.remoteControl("FM_CS_CM",0)}}},[e._v("远程停止")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("风门操作")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_KB1,expression:"paramSignal.FM_XH_KB1 == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FM_CZ_OPEN1",1)}}},[e._v(" A 门打开")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"false"==e.paramSignal.FM_XH_KB1,expression:"paramSignal.FM_XH_KB1 == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FM_CZ_CLOSE1",1)}}},[e._v(" A 门关闭")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_KB2,expression:"paramSignal.FM_XH_KB2 == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FM_CZ_OPEN2",1)}}},[e._v(" B 门打开")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"false"==e.paramSignal.FM_XH_KB2,expression:"paramSignal.FM_XH_KB2 == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FM_CZ_CLOSE2",1)}}},[e._v(" B 门关闭")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("参数设置")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-orange",on:{click:e.openParam}},[e._v("参数设置")])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("历史记录")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("操作记录")])])])])]),e._v(" "),i("div",{staticClass:"flex-right"},[i("div",{staticClass:"table-layout"},[i("div",{staticClass:"table-box"},[i("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.switchLog.aSwitchLog,border:!0,"header-cell-style":e.headerCellStyle}},[i("el-table-column",{attrs:{label:"A风门",prop:"operationValue",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.controlMode.name+("true"==t.row.operationValue?"关闭":"开启")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"A风门",prop:"timeMillis","min-width":"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$refs.history.getTime(t.row.timeMillis)))])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"table-box"},[i("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.switchLog.bSwitchLog,border:!0,"header-cell-style":e.headerCellStyle}},[i("el-table-column",{attrs:{label:"B风门",prop:"type",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.controlMode.name+("true"==t.row.operationValue?"关闭":"开启")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"B风门",prop:"timeMillis","min-width":"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$refs.history.getTime(t.row.timeMillis)))])]}}])})],1)],1)])]),e._v(" "),i("param-modal",{attrs:{visible:e.paramVisible,deviceType:"damper"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),i("history-modal",{ref:"history",attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}})],1)},staticRenderFns:[]};var S=a("VU/8")(w,C,!1,function(e){a("H2M5"),a("Syjc")},"data-v-d531c566",null).exports,x={name:"WindowInfo",components:{ParamModal:h,HistoryModal:b},props:{cameraList:Array,paramSignal:{type:Object,default:function(){return{}}}},data:function(){return{paramVisible:!1,historyVisible:!1,socketList:[]}},watch:{"paramSignal.FC_XH_JD1":{handler:function(e,t){this.initChart(),this.changeWindow(e,t,"img1")}},"paramSignal.FC_XH_JD2":{handler:function(e,t){this.initChart(),this.changeWindow(e,t,"img2")}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){var e=this;this.videoPlay(),this.$nextTick(function(){e.initChart()})},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()})},methods:{openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},changeWindow:function(e,t,i){var r=90==e?8:Math.ceil(Number(e)/15)+1,n=90==t?8:Math.ceil(Number(t)/15)+1,s=document.getElementById(i);if(t){if(r!=n){var o=n;if(n<r)var l=setInterval(function(){s.src=a("RPIr")("./wind_"+ ++o+".png"),o==r&&clearInterval(l)},300);else l=setInterval(function(){s.src=a("RPIr")("./wind_"+--o+".png"),o==r&&clearInterval(l)},300)}}else s.src=a("RPIr")("./wind_"+r+".png")},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},startPlay:function(){var e=this;this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})},initChart:function(){this.$echarts.getInstanceByDom(document.getElementById("main1"))&&this.$echarts.dispose(document.getElementById("main1")),this.$echarts.getInstanceByDom(document.getElementById("main2"))&&this.$echarts.dispose(document.getElementById("main2"));var e=this.$echarts.init(document.getElementById("main1")),t=this.$echarts.init(document.getElementById("main2")),a=this.paramSignal.FC_XH_JD1||0,i=this.paramSignal.FC_XH_JD2||0,r={title:[{text:a+" °",bottom:"5%",left:"center",textStyle:{fontSize:"24",color:"#ffff",fontWeight:800},triggerEvent:!0}],legend:{show:!1},series:[{name:"刻度尺",type:"gauge",radius:"88%",splitNumber:9,min:0,max:90,axisLine:{lineStyle:{color:[[1,{type:"radial",x:.5,y:.6,r:.6,colorStops:[{offset:.85,color:"#031F46"},{offset:.93,color:"#060d25"},{offset:1,color:"#12D7EF"}]}]]}},splitLine:{show:!0,length:14,lineStyle:{width:3,color:"#12E5FE"}},axisTick:{show:!0,splitNumber:10,length:10,lineStyle:{color:"#12E5FE",width:2}},axisLabel:{distance:10,color:"#CEF3FE",fontSize:"14",fontWeight:500},detail:{show:!1}},{name:"内层带指针",type:"gauge",radius:"55%",splitNumber:9,min:0,max:90,axisLine:{lineStyle:{color:[[1,{type:"radial",x:.5,y:.59,r:.6,colorStops:[{offset:.72,color:"#032046"},{offset:.94,color:"#086989"},{offset:.98,color:"#0FAFCB"},{offset:1,color:"#0EA4C1"}]}]],width:1e3}},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},pointer:{show:!0,length:"90%",width:5},itemStyle:{color:"#01eaf8"},data:[{value:a}],detail:{show:!1}}]},n={title:[{text:i+" °",bottom:"5%",left:"center",textStyle:{fontSize:"24",color:"#ffff",fontWeight:800},triggerEvent:!0}],legend:{show:!1},series:[{name:"刻度尺",type:"gauge",radius:"88%",splitNumber:9,min:0,max:90,axisLine:{lineStyle:{color:[[1,{type:"radial",x:.5,y:.6,r:.6,colorStops:[{offset:.85,color:"#031F46"},{offset:.93,color:"#060d25"},{offset:1,color:"#12D7EF"}]}]]}},splitLine:{show:!0,length:14,lineStyle:{width:3,color:"#12E5FE"}},axisTick:{show:!0,splitNumber:10,length:10,lineStyle:{color:"#12E5FE",width:2}},axisLabel:{distance:10,color:"#CEF3FE",fontSize:"14",fontWeight:500},detail:{show:!1}},{name:"内层带指针",type:"gauge",radius:"55%",splitNumber:9,min:0,max:90,axisLine:{lineStyle:{color:[[1,{type:"radial",x:.5,y:.59,r:.6,colorStops:[{offset:.72,color:"#032046"},{offset:.94,color:"#086989"},{offset:.98,color:"#0FAFCB"},{offset:1,color:"#0EA4C1"}]}]],width:1e3}},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},pointer:{show:!0,length:"90%",width:5},itemStyle:{color:"#01eaf8"},data:[{value:i}],detail:{show:!1}}]};e.setOption(r),t.setOption(n)}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-flex"},[a("div",{staticClass:"flex-left"},[a("div",{staticClass:"monitor-box"},[a("span",{staticClass:"monitor-title"},[e._v("监控1")]),e._v(" "),a("div",{staticClass:"monitor-video"},[a("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),a("div",{staticClass:"monitor-box"},[a("span",{staticClass:"monitor-title"},[e._v("监控2")]),e._v(" "),a("div",{staticClass:"monitor-video"},[a("video",{ref:"video2",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video2",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])])]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"flex-right"},[a("div",{staticClass:"operate-layout"},[a("div",{staticClass:"operate-box"},[a("p",{staticClass:"operate-title"},[e._v("A风窗操作")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"button-list"},[a("div",{staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FC_CZ_OPEN1",1)}}},[e._v("启动A风窗")]),e._v(" "),a("div",{staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FC_CZ_CLOSE1",1)}}},[e._v("关闭A风窗")])])])]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[a("p",{staticClass:"operate-title"},[e._v("B风窗操作")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"button-list"},[a("div",{staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FC_CZ_OPEN2",1)}}},[e._v("启动B风窗")]),e._v(" "),a("div",{staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FC_CZ_CLOSE2",1)}}},[e._v("关闭B风窗")])])])]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[a("p",{staticClass:"operate-title"},[e._v("参数设置")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"button-orange",on:{click:e.openParam}},[e._v("参数设置")])])]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[a("p",{staticClass:"operate-title"},[e._v("历史记录")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("操作记录")])])])])]),e._v(" "),a("param-modal",{attrs:{visible:e.paramVisible,deviceType:"wind"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),a("history-modal",{attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex-main"},[t("div",{staticClass:"flex-top"},[t("img",{staticClass:"window-img",attrs:{src:a("z2GJ"),id:"img1"}}),this._v(" "),t("img",{staticClass:"window-img",attrs:{src:a("z2GJ"),id:"img2"}})]),this._v(" "),t("div",{staticClass:"flex-bottom"},[t("div",{staticClass:"chart",attrs:{id:"main1"}}),this._v(" "),t("div",{staticClass:"chart",attrs:{id:"main2"}})])])}]};var M=a("VU/8")(x,k,!1,function(e){a("dJ8E"),a("Ul8x")},"data-v-05abd79c",null).exports,F={name:"WindowInfoOne",components:{ParamModal:h,HistoryModal:b},props:{cameraList:Array,paramSignal:{type:Object,default:function(){return{}}}},data:function(){return{paramVisible:!1,historyVisible:!1,socketList:[],window_url:a("z2GJ")}},watch:{"paramSignal.FC_XH_JD1":{handler:function(e,t){this.initChart(),this.changeWindow(e,t)}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){var e=this;this.videoPlay(),this.$nextTick(function(){e.initChart()})},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()})},methods:{openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},changeWindow:function(e,t){var i=this,r=90==e?8:Math.ceil(Number(e)/15)+1,n=90==t?8:Math.ceil(Number(t)/15)+1;if(t){if(r!=n){var s=n;if(n<r)var o=setInterval(function(){i.window_url=a("RPIr")("./wind_"+ ++s+".png"),s==r&&clearInterval(o)},300);else o=setInterval(function(){i.window_url=a("RPIr")("./wind_"+--s+".png"),s==r&&clearInterval(o)},300)}}else this.window_url=a("RPIr")("./wind_"+r+".png")},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},startPlay:function(){var e=this;this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})},initChart:function(){this.$echarts.getInstanceByDom(document.getElementById("main1"))&&this.$echarts.dispose(document.getElementById("main1"));var e=this.$echarts.init(document.getElementById("main1")),t=this.paramSignal.FC_XH_JD1||0,a={title:[{text:t+" °",bottom:"5%",left:"center",textStyle:{fontSize:"24",color:"#ffff",fontWeight:800},triggerEvent:!0}],legend:{show:!1},series:[{name:"刻度尺",type:"gauge",radius:"88%",splitNumber:10,min:0,max:100,axisLine:{lineStyle:{color:[[1,{type:"radial",x:.5,y:.6,r:.6,colorStops:[{offset:.85,color:"#031F46"},{offset:.93,color:"#060d25"},{offset:1,color:"#12D7EF"}]}]]}},splitLine:{show:!0,length:14,lineStyle:{width:3,color:"#12E5FE"}},axisTick:{show:!0,splitNumber:10,length:10,lineStyle:{color:"#12E5FE",width:2}},axisLabel:{distance:10,color:"#CEF3FE",fontSize:"14",fontWeight:500},detail:{show:!1}},{name:"内层带指针",type:"gauge",radius:"55%",splitNumber:10,min:0,max:100,axisLine:{lineStyle:{color:[[1,{type:"radial",x:.5,y:.59,r:.6,colorStops:[{offset:.72,color:"#032046"},{offset:.94,color:"#086989"},{offset:.98,color:"#0FAFCB"},{offset:1,color:"#0EA4C1"}]}]],width:1e3}},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},pointer:{show:!0,length:"90%",width:5},itemStyle:{color:"#01eaf8"},data:[{value:t}],detail:{show:!1}}]};e.setOption(a)}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-flex"},[a("div",{staticClass:"flex-left"},[a("div",{staticClass:"monitor-box"},[a("span",{staticClass:"monitor-title"},[e._v("监控1")]),e._v(" "),a("div",{staticClass:"monitor-video"},[a("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])])]),e._v(" "),a("div",{staticClass:"flex-main"},[a("div",{staticClass:"window-box"},[a("img",{staticClass:"window-img",attrs:{src:e.window_url}}),e._v(" "),a("div",{staticClass:"window-info"},[a("div",{staticClass:"btn-space button-blue",on:{click:function(t){return e.operateInstruct("FC_CZ_OPEN1",1)}}},[e._v("启动风窗")]),e._v(" "),a("div",{staticClass:"btn-space button-orange",on:{click:function(t){return e.operateInstruct("FC_CZ_CLOSE1",1)}}},[e._v("关闭风窗")]),e._v(" "),a("div",{staticClass:"btn-space button-blue",on:{click:e.openParam}},[e._v("参数设置")]),e._v(" "),a("div",{staticClass:"btn-space button-orange",on:{click:e.openHistory}},[e._v("历史数据")])])])]),e._v(" "),e._m(0),e._v(" "),a("param-modal",{attrs:{visible:e.paramVisible,deviceType:"windOne"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),a("history-modal",{attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex-main"},[t("div",{staticClass:"chart",attrs:{id:"main1"}})])}]};var L=a("VU/8")(F,D,!1,function(e){a("q2n9"),a("dSV0")},"data-v-621cd860",null).exports,N={name:"FireDoorInfo",components:{HistoryModal:b},props:{cameraList:Array,paramSignal:{type:Object,default:function(){return{}}},paramSetting:{type:Object,default:function(){return{}}},switchLog:Array},data:function(){return{isOpenA:!1,isClickA:!0,historyVisible:!1,tableData:[],socketList:[],timerList:[]}},watch:{"paramSignal.FHM_XH_KB":{handler:function(e){JSON.parse(e)?this.closeDoorA():this.openDoorA()}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){this.videoPlay()},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()}),this.timerList.map(function(e){clearTimeout(e)})},methods:{headerCellStyle:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);return t[0].colSpan=0,t[1].colSpan=2,0===a?{display:"none"}:{background:"rgba(20, 128, 240, 0.8) !important"}},openDoorA:function(){var e=this;if(!this.isOpenA&&this.isClickA){this.isOpenA=!0,this.isClickA=!1,this.$refs.doorA.classList.remove("door-close-a"),this.$refs.doorA.classList.add("door-open-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-open-a"),e.$refs.doorA.style.backgroundImage="url("+a("67N+")+")",e.isClickA=!0},1900);this.timerList.push(t)}},closeDoorA:function(){var e=this;if(this.isOpenA&&this.isClickA){this.isOpenA=!1,this.isClickA=!1,this.$refs.doorA.classList.remove("door-open-a"),this.$refs.doorA.classList.add("door-close-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-close-a"),e.$refs.doorA.style.backgroundImage="url("+a("xjFc")+")",e.isClickA=!0},1900);this.timerList.push(t)}},openHistory:function(){this.historyVisible=!0},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},remoteControl:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("control",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},startPlay:function(){var e=this;this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-flex"},[a("div",{staticClass:"flex-left"},[a("div",{staticClass:"monitor-box"},[a("span",{staticClass:"monitor-title"},[e._v("监控1")]),e._v(" "),a("div",{staticClass:"monitor-video"},[a("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),a("div",{staticClass:"table-layout"},[a("div",{staticClass:"table-box"},[a("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.switchLog,border:!0,"header-cell-style":e.headerCellStyle}},[a("el-table-column",{attrs:{label:"防火门",prop:"type",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.controlMode.name+("true"==t.row.operationValue?"关闭":"开启")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"防火门",prop:"timeMillis","min-width":"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$refs.history.getTime(t.row.timeMillis)))])]}}])})],1)],1)])]),e._v(" "),a("div",{staticClass:"flex-center"},[a("div",{staticClass:"door-box"},[a("div",{staticClass:"door-img"}),e._v(" "),a("div",{ref:"doorA",staticClass:"door-gif-a"})])]),e._v(" "),a("div",{staticClass:"flex-right"},[a("div",{staticClass:"operate-layout"},[a("div",{staticClass:"operate-box",staticStyle:{"margin-bottom":"20px"}},[a("p",{staticClass:"operate-title"},[e._v("远程控制")]),e._v(" "),a("div",{staticClass:"button-box"},[a("div",{staticClass:"button-list"},[a("div",{staticStyle:{color:"#fff"}},[e._v(e._s("0"==e.paramSetting.FHM_CS_CM||"false"==e.paramSetting.FHM_CS_CM?"就地模式":"1"==e.paramSetting.FHM_CS_CM||"true"==e.paramSetting.FHM_CS_CM?"远程模式":""))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.paramSetting.FHM_CS_CM||"false"==e.paramSetting.FHM_CS_CM,expression:"paramSetting.FHM_CS_CM == '0' || paramSetting.FHM_CS_CM == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.remoteControl("FHM_CS_CM",1)}}},[e._v("远程启动")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.paramSetting.FHM_CS_CM||"true"==e.paramSetting.FHM_CS_CM,expression:"paramSetting.FHM_CS_CM == '1' || paramSetting.FHM_CS_CM == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.remoteControl("FHM_CS_CM",0)}}},[e._v("远程停止")])])])]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-bottom":"20px"}},[a("p",{staticClass:"operate-title"},[e._v("防火门操作")]),e._v(" "),a("div",{staticClass:"button-box"},[a("div",{staticClass:"button-list",staticStyle:{"justify-content":"center"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FHM_XH_KB,expression:"paramSignal.FHM_XH_KB == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FHM_CZ_OPEN",1)}}},[e._v("防火门打开")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"false"==e.paramSignal.FHM_XH_KB,expression:"paramSignal.FHM_XH_KB == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FHM_CZ_CLOSE",1)}}},[e._v("防火门关闭")])])])]),e._v(" "),a("div",{staticClass:"operate-box"},[a("p",{staticClass:"operate-title"},[e._v("历史记录")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("操作记录")])])])])]),e._v(" "),a("history-modal",{ref:"history",attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}})],1)},staticRenderFns:[]};var A=a("VU/8")(N,T,!1,function(e){a("mF0n"),a("VQTZ")},"data-v-e6253fba",null).exports,H={name:"DustModal",props:{visible:Boolean,deviceType:String,paramSetting:{type:Object,default:function(){return{}}}},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},form:{time:[],type:null},chartData:[]}},methods:{updateVisible:function(e){this.$refs.form.resetFields(),this.$emit("update:visible",e)},onSubmit:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("measureWind"!=e.deviceType){t.next=4;break}return t.next=3,e.querySignalLogCurve(119);case 3:e.initChartWind();case 4:if("mainLane"!=e.deviceType){t.next=8;break}return t.next=7,e.querySignalLogCurve("PW_XH_FCND");case 7:e.initChartMainLane(Number(e.paramSetting.PW_CS_FCNDSX));case 8:if("mine"!=e.deviceType){t.next=21;break}if("ZC_XH_FCND1"!=e.form.type){t.next=13;break}return t.next=12,e.querySignalLogCurve("ZC_XH_FCND1");case 12:e.initChartMine("粉尘浓度1",Number(e.paramSetting.ZC_CS_FCNDSX1));case 13:if("ZC_XH_FCND2"!=e.form.type){t.next=17;break}return t.next=16,e.querySignalLogCurve("ZC_XH_FCND2");case 16:e.initChartMine("粉尘浓度2",Number(e.paramSetting.ZC_CS_FCNDSX2));case 17:if("ZC_XH_FCND3"!=e.form.type){t.next=21;break}return t.next=20,e.querySignalLogCurve("ZC_XH_FCND3");case 20:e.initChartMine("粉尘浓度3",Number(e.paramSetting.ZC_CS_FCNDSX3));case 21:case"end":return t.stop()}},t,e)}))()},querySignalLogCurve:function(e){var t=this;return s()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.post("/log/querySignalLogCurve",{deviceId:Number(t.$route.params.deviceId),deviceTypeId:Number(t.$route.params.deviceTypeId),code:e,time:t.form.time});case 3:i=a.sent,t.chartData=i.data.data,a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,t,[[0,7]])}))()},initChartWind:function(){var e=[];this.chartData.map(function(t){var a=[];a.push(t.timeMillis),a.push(t.signalValue),e.push(a)});var t=this.$echarts.init(document.getElementById("lineChart")),a={tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(t,a,i){var r=t[0].dataIndex,n=new Date(e[r][0]);return"时间："+((n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+(n.getDate()<10?"0"+n.getDate():n.getDate())+" "+(n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()))+"<br>风速："+e[r][1]+"m/s "}},xAxis:{type:"time",min:this.form.time[0],max:this.form.time[1],axisLabel:{color:"#c0c4cc",fontSize:14,formatter:function(e){var t=new Date(e);return(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}}},yAxis:{name:"风速(m/s)",nameTextStyle:{color:"#c0c4cc"},axisLabel:{color:"#c0c4cc",fontSize:14},splitLine:{lineStyle:{color:"#606266",type:"dashed"}},axisLine:{show:!1},axisTick:{show:!1}},series:[{type:"line",color:"#FFE282",smooth:!0,symbolSize:3,areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"rgba(137,19,227, 0.8)"},{offset:1,color:"rgba(0,255,255,0.2)"}])},lineStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#00FFFF"},{offset:1,color:"#8D12E9"}],global:!1},width:2},data:e}]};t.setOption(a)},initChartMainLane:function(e){var t=[];this.chartData.map(function(e){var a=[];a.push(e.timeMillis),a.push(e.signalValue),t.push(a)});var a=this.$echarts.init(document.getElementById("lineChart")),i={tooltip:{trigger:"axis",formatter:function(e,a,i){var r=e[0].dataIndex,n=new Date(t[r][0]);return"时间："+((n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+(n.getDate()<10?"0"+n.getDate():n.getDate())+" "+(n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()))+"<br>浓度："+t[r][1]+"mg/cm³ "}},xAxis:{type:"time",min:this.form.time[0],max:this.form.time[1],axisLabel:{color:"#c0c4cc",fontSize:14,formatter:function(e){var t=new Date(e);return(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}}},yAxis:{name:"(mg/cm³)",nameGap:20,nameTextStyle:{color:"#c0c4cc"},axisLabel:{color:function(t){return t==e?"red":"#c0c4cc"},fontSize:14},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:[{type:"line",color:"#FFE282",smooth:!0,symbolSize:3,areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"rgba(137,19,227, 0.8)"},{offset:1,color:"rgba(0,255,255,0.2)"}])},lineStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#00FFFF"},{offset:1,color:"#8D12E9"}],global:!1},width:2},markLine:{symbol:"none",data:[{yAxis:e,lineStyle:{color:"red",type:"solid"}}]},markArea:{itemStyle:{color:"rgba(255, 69, 0, 0.8)"},data:[[{yAxis:"1000"},{yAxis:e}]]},data:t}]};a.setOption(i)},initChartMine:function(e,t){var a=[];this.chartData.map(function(e){var t=[];t.push(e.timeMillis),t.push(e.signalValue),a.push(t)});var i=this.$echarts.init(document.getElementById("lineChart")),r={title:{text:e,left:"center",textStyle:{color:"#333"}},tooltip:{trigger:"axis",formatter:function(e,t,i){var r=e[0].dataIndex,n=new Date(a[r][0]);return"时间："+((n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+(n.getDate()<10?"0"+n.getDate():n.getDate())+" "+(n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()))+"<br>粉尘浓度："+a[r][1]+"(mg/cm³) "}},xAxis:{type:"time",min:this.form.time[0],max:this.form.time[1],axisLabel:{textStyle:{color:"#c0c4cc",fontSize:12},formatter:function(e){var t=new Date(e);return(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}}},yAxis:{name:"(mg/cm³)",nameTextStyle:{color:"#c0c4cc"},axisLabel:{textStyle:{color:function(e){return e==t?"red":"#c0c4cc"},fontSize:12}},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:[{type:"line",color:"#FFE282",smooth:!0,symbolSize:3,areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"rgba(137, 19, 227, 0.8)"},{offset:1,color:"rgba(0, 255, 255, 0.2)"}])},lineStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#00FFFF"},{offset:1,color:"#8D12E9"}],global:!1},width:2},markLine:{symbol:"none",data:[{yAxis:t,lineStyle:{color:"red",type:"solid"}}]},markArea:{itemStyle:{color:"rgba(255, 69, 0, 0.8)"},data:[[{yAxis:"1000"},{yAxis:t}]]},data:a}]};i.setOption(r)}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"custom-modal",attrs:{visible:e.visible,fullscreen:!0,modal:!1,"close-on-click-modal":!1},on:{"update:visible":e.updateVisible}},[a("el-form",{ref:"form",staticClass:"form",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"请选择日期",prop:"alarm"}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"timestamp","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"medium"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"mine"==e.deviceType,expression:"deviceType == 'mine'"}]},[a("el-select",{attrs:{clearable:"",placeholder:"请选择粉尘浓度"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{value:"ZC_XH_FCND1",label:"粉尘浓度1"}}),e._v(" "),a("el-option",{attrs:{value:"ZC_XH_FCND2",label:"粉尘浓度2"}}),e._v(" "),a("el-option",{attrs:{value:"ZC_XH_FCND3",label:"粉尘浓度3"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),e._v(" "),a("div",{staticClass:"lineChart",attrs:{id:"lineChart"}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.updateVisible(!1)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateVisible(!1)}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var E=a("VU/8")(H,P,!1,function(e){a("wGWn")},"data-v-1f300473",null).exports,I={name:"MeasureWindInfo",components:{ParamModal:h,HistoryModal:b,DustModal:E},props:{paramsList:Array,cameraList:Array,paramSignal:{type:Object,default:function(){return{}}}},data:function(){return{paramVisible:!1,historyVisible:!1,dustVisible:!1,chartData:[]}},watch:{"paramSignal.119":{handler:function(e){var t=this;return s()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:console.log("val:",e),t.chartData.push({timeMillis:Date.now(),signalValue:e}),t.initChart();case 3:case"end":return a.stop()}},a,t)}))()}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.querySignalLogCurve();case 2:e.videoPlay(),e.$nextTick(function(){e.initChart()});case 4:case"end":return t.stop()}},t,e)}))()},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()})},methods:{openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},openDust:function(){this.dustVisible=!0},querySignalLogCurve:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/log/querySignalLogCurve",{deviceId:Number(e.$route.params.deviceId),deviceParameterId:119,time:[e.getTimeNum(),e.getTimeNum()+864e5]});case 3:a=t.sent,e.chartData=a.data.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},operateInstruct:function(e){var t=this;return s()(r.a.mark(function a(){var i,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=void 0,t.paramsList.map(function(t){t.deviceParameterId==e&&((i=t).parameterValue=1,p.b.map(function(e){e.label==i.parameterType&&(i.parameterType=e.value)}),p.c.map(function(e){e.label==i.valueType&&(i.valueType=e.value)}))}),a.prev=2,a.next=5,t.$http.post("/monitor/updateCommandValue",{deviceTypeId:Number(t.$route.params.deviceTypeId),deviceId:Number(t.$route.params.deviceId),deviceParameter:i});case 5:200==(n=a.sent).data.code?n.data.data[e].success?t.$message.success("操作成功"):t.$message.error(n.data.data[e].message):t.$message.error(n.data.msg),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),console.log(a.t0);case 12:case"end":return a.stop()}},a,t,[[2,9]])}))()},startPlay:function(){var e=this;this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})},initChart:function(){var e=[];this.chartData.map(function(t){var a=[];a.push(t.timeMillis),a.push(t.signalValue),e.push(a)});var t=this.$echarts.init(document.getElementById("main")),a={grid:{left:"6%",top:"15%",right:"3%",bottom:"10%"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(t,a,i){var r=t[0].dataIndex;if(e.length>0){var n=new Date(e[r][0]);return"时间："+((n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()))+"<br>风速："+e[r][1]+"m/s "}}},xAxis:{type:"time",min:this.getTimeNum(),max:this.getTimeNum()+864e5+1,interval:72e5,axisLabel:{color:"#c0c4cc",fontSize:14,formatter:function(e,t){if(7==t)return"24:00";var a=new Date(e);return(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())}}},yAxis:{name:"风速(m/s)",nameTextStyle:{color:"#c0c4cc"},axisLabel:{color:"#c0c4cc",fontSize:14},splitLine:{lineStyle:{color:"#606266",type:"dashed"}},axisLine:{show:!1},axisTick:{show:!1}},series:[{type:"line",color:"#FFE282",smooth:!0,symbolSize:3,areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"rgba(137,19,227, 0.8)"},{offset:1,color:"rgba(0,255,255,0.2)"}])},lineStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#00FFFF"},{offset:1,color:"#8D12E9"}],global:!1},width:2},data:e}]};t.setOption(a)},getTimeNum:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth(),i=e.getDate();return new Date(t,a,i).getTime()}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-flex"},[a("div",{staticClass:"flex-left"},[a("div",{staticClass:"flex-top"},[a("div",{staticClass:"monitor-box"},[a("span",{staticClass:"monitor-title"},[e._v("监控")]),e._v(" "),a("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})]),e._v(" "),a("div",{staticClass:"wind-img"})]),e._v(" "),a("div",{staticClass:"chart",attrs:{id:"main"}})]),e._v(" "),a("div",{staticClass:"flex-main"},[a("div",{staticClass:"box-left"},[a("div",{staticClass:"operate-layout"},[a("div",{staticClass:"operate-box"},[a("p",{staticClass:"operate-title"},[e._v("参数设置")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"button-orange",on:{click:e.openParam}},[e._v("参数设置")])])]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[a("p",{staticClass:"operate-title"},[e._v("历史记录")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"button-list"},[a("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("操作记录")]),e._v(" "),a("div",{staticClass:"button-blue",on:{click:e.openDust}},[e._v("历史曲线")])])])])]),e._v(" "),a("div",{staticClass:"desc-list"},[a("div",{staticClass:"desc"},[e._v("风速："+e._s(e.paramSignal[119])+"m/s")]),e._v(" "),a("div",{staticClass:"desc"},[e._v("断面："+e._s(e.paramSignal[120])+"m²")]),e._v(" "),a("div",{staticClass:"desc"},[e._v("风量："+e._s(100*e.paramSignal[119]*(100*e.paramSignal[120])*60/1e4)+"m³/min")])])])]),e._v(" "),a("param-modal",{attrs:{visible:e.paramVisible,paramsList:e.paramsList,deviceType:"measureWind"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),a("history-modal",{attrs:{visible:e.historyVisible,paramsList:e.paramsList},on:{"update:visible":function(t){e.historyVisible=t}}}),e._v(" "),a("dust-modal",{attrs:{visible:e.dustVisible,deviceType:"measureWind"},on:{"update:visible":function(t){e.dustVisible=t}}})],1)},staticRenderFns:[]};var X=a("VU/8")(I,B,!1,function(e){a("7VLd"),a("98P7")},"data-v-ee364e48",null).exports,O={name:"AlarmModal",props:{visible:{type:Boolean,default:!1},paramsList:{type:Array}},data:function(){return{form_query:{time_period:null},tableData:[],operationData:{},pageSize:1}},watch:{visible:{handler:function(e){e&&this.queryAlarmLog()},immediate:!0}},methods:{updateVisible:function(e){this.$refs.form.resetFields(),this.$emit("update:visible",e)},onSubmit:function(){this.queryAlarmLog(this.form_query.time_period)},queryAlarmLog:function(e){var t=this;return s()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.post("/log/queryAlarmLog",{deviceId:Number(t.$route.params.deviceId),pageIndex:t.pageSize,time:e});case 3:i=a.sent,t.tableData=i.data.data.records,t.operationData=i.data.data,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},a,t,[[0,8]])}))()},getTime:function(e){var t=new Date(parseInt(e));return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+"   "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},handleCurrentChange:function(){this.queryAlarmLog()}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"custom-modal",attrs:{visible:e.visible,width:"60%",modal:!1,"close-on-click-modal":!1},on:{"update:visible":e.updateVisible}},[a("el-form",{ref:"form",attrs:{inline:!0,model:e.form_query}},[a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange","value-format":"timestamp","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],size:"medium"},model:{value:e.form_query.time_period,callback:function(t){e.$set(e.form_query,"time_period",t)},expression:"form_query.time_period"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{label:"序号",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmCodeValue",label:"报警值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmInformation",label:"报警信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"timeMillis",label:"报警时间",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getTime(t.row.timeMillis)))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"box-page",attrs:{"current-page":e.pageSize,"page-size":100,layout:"total, prev, pager, next",total:e.operationData.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageSize=t},"update:current-page":function(t){e.pageSize=t}}})],1)},staticRenderFns:[]};var W=a("VU/8")(O,$,!1,function(e){a("1xD7")},"data-v-186f9710",null).exports,V={name:"MainLaneInfo",components:{ParamModal:h,HistoryModal:b,DustModal:E,AlarmModal:W},props:{cameraList:Array,paramSignal:{type:Object,default:function(){return{}}},paramSetting:{type:Object,default:function(){return{}}},operationLogs:Array},data:function(){return{paramVisible:!1,historyVisible:!1,dustVisible:!1,alarmVisible:!1,chartData:[]}},watch:{"paramSignal.PW_XH_FCND":{handler:function(e){this.chartData.push({timeMillis:Date.now(),signalValue:e}),this.initChart(Number(this.paramSetting.PW_CS_FCNDSX))}},"paramSetting.PW_CS_FCNDSX":{handler:function(e){this.initChart(Number(e))}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.querySignalLogCurve();case 2:e.videoPlay(),e.$nextTick(function(){e.initChart(Number(e.paramSetting.PW_CS_FCNDSX))});case 4:case"end":return t.stop()}},t,e)}))()},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()})},methods:{openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},openDust:function(){this.dustVisible=!0},openAlarm:function(){this.alarmVisible=!0},querySignalLogCurve:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/log/querySignalLogCurve",{deviceId:Number(e.$route.params.deviceId),deviceTypeId:Number(e.$route.params.deviceTypeId),code:"PW_XH_FCND",time:[e.getTimeNum(),e.getTimeNum()+864e5]});case 3:a=t.sent,e.chartData=a.data.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},remoteControl:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("control",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},startPlay:function(){var e=this;this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})},initChart:function(e){var t=[];this.chartData.map(function(e){var a=[];a.push(e.timeMillis),a.push(e.signalValue),t.push(a)});var a=this.$echarts.init(document.getElementById("main")),i={grid:{left:"8%",top:"15%",right:"4%",bottom:"10%"},tooltip:{trigger:"axis",formatter:function(e,a,i){var r=e[0].dataIndex,n=new Date(t[r][0]);return"时间："+((n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()))+"<br>浓度："+t[r][1]+"mg/cm³ "}},xAxis:{type:"time",min:this.getTimeNum(),max:this.getTimeNum()+864e5+1,interval:72e5,axisLabel:{color:"#c0c4cc",fontSize:14,formatter:function(e,t){if(7==t)return"24:00";var a=new Date(e);return(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())}}},yAxis:{name:"(mg/cm³)",nameGap:20,nameTextStyle:{color:"#c0c4cc"},axisLabel:{color:function(t){return t==e?"red":"#c0c4cc"},fontSize:14},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:[{type:"line",color:"#FFE282",smooth:!0,symbolSize:3,areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"rgba(137,19,227, 0.8)"},{offset:1,color:"rgba(0,255,255,0.2)"}])},lineStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#00FFFF"},{offset:1,color:"#8D12E9"}],global:!1},width:2},markLine:{symbol:"none",data:[{yAxis:e,lineStyle:{color:"red",type:"solid"}}]},markArea:{itemStyle:{color:"rgba(255, 69, 0, 0.8)"},data:[[{yAxis:"1000"},{yAxis:e}]]},data:t}]};a.setOption(i)},getTimeNum:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth(),i=e.getDate();return new Date(t,a,i).getTime()}}},Z={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"info-flex"},[i("div",{staticClass:"flex-left"},[i("div",{staticClass:"flex-top"},[i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2!=e.paramSetting.PW_CS_PWGNMS,expression:"paramSetting.PW_CS_PWGNMS != 2"}],staticClass:"wind-img"},[i("img",{directives:[{name:"show",rawName:"v-show",value:0==e.paramSignal.PW_XH_IN1,expression:"paramSignal.PW_XH_IN1 == 0"}],staticClass:"light light-left",attrs:{src:a("GJwc")}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:0==e.paramSignal.PW_XH_IN2,expression:"paramSignal.PW_XH_IN2 == 0"}],staticClass:"light light-right",attrs:{src:a("GJwc")}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.paramSetting.PW_CS_PWGNMS,expression:"paramSetting.PW_CS_PWGNMS == 2"}],staticClass:"wind-reprint"},[i("img",{directives:[{name:"show",rawName:"v-show",value:0==e.paramSignal.PW_XH_IN1,expression:"paramSignal.PW_XH_IN1 == 0"}],staticClass:"light light-1",attrs:{src:a("GJwc")}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:0==e.paramSignal.PW_XH_IN2,expression:"paramSignal.PW_XH_IN2 == 0"}],staticClass:"light light-2",attrs:{src:a("GJwc")}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:0==e.paramSignal.PW_XH_IN3,expression:"paramSignal.PW_XH_IN3 == 0"}],staticClass:"light light-3",attrs:{src:a("GJwc")}})])]),e._v(" "),i("div",{staticClass:"chart",attrs:{id:"main"}})]),e._v(" "),i("div",{staticClass:"flex-main"},[i("div",{staticClass:"operate-layout"},[i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("远程控制")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{staticStyle:{color:"#fff"}},[e._v(e._s("0"==e.paramSignal.PW_XH_CM?"就地模式":"1"==e.paramSignal.PW_XH_CM?"远程模式":""))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.paramSignal.PW_XH_CM,expression:"paramSignal.PW_XH_CM == '0'"}],staticClass:"button-blue",on:{click:function(t){return e.remoteControl("PW_CS_CM",1)}}},[e._v("远程启动")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.paramSignal.PW_XH_CM,expression:"paramSignal.PW_XH_CM == '1'"}],staticClass:"button-orange",on:{click:function(t){return e.remoteControl("PW_CS_CM",0)}}},[e._v("远程停止")])])])]),e._v(" "),i("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[i("p",{staticClass:"operate-title"},[e._v("喷雾操作")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{staticStyle:{color:"#fff"}},[e._v(e._s(0==e.paramSignal.PW_XH_GZZT?"关闭状态":1==e.paramSignal.PW_XH_GZZT?"开启状态":""))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.paramSignal.PW_XH_GZZT,expression:"paramSignal.PW_XH_GZZT == 0"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("PW_CZ_YCKZPWSS",1)}}},[e._v("启动设备")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.paramSignal.PW_XH_GZZT,expression:"paramSignal.PW_XH_GZZT == 1"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("PW_CZ_YCKZPWSS",0)}}},[e._v("关闭设备")])])])]),e._v(" "),i("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[i("p",{staticClass:"operate-title"},[e._v("参数设置")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-orange",on:{click:e.openParam}},[e._v("参数设置")])])]),e._v(" "),i("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[i("p",{staticClass:"operate-title"},[e._v("历史记录")]),e._v(" "),i("div",{staticClass:"button-box"},[i("div",{staticClass:"button-list"},[i("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("操作记录")]),e._v(" "),i("div",{staticClass:"button-blue",on:{click:e.openAlarm}},[e._v("报警记录")])]),e._v(" "),i("div",{staticClass:"button-list"},[i("div",{staticClass:"button-blue",on:{click:e.openDust}},[e._v("历史曲线")]),e._v(" "),i("div",{staticClass:"button-blue"},[e._v("备用")])])])]),e._v(" "),i("div",{staticClass:"desc-list",staticStyle:{"margin-top":"24px"}},[i("div",{staticClass:"desc"},[e._v("粉尘浓度："+e._s(e.paramSignal.PW_XH_FCND)+"mg/cm³")])])]),e._v(" "),i("div",{staticClass:"table-layout"},[i("div",{staticClass:"table-box"},[i("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.operationLogs,border:!0,"show-header":!1}},[i("el-table-column",{attrs:{prop:"operationValue","show-overflow-tooltip":!0,align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.controlMode.name+("0"==t.row.operationValue?"关闭":"开启")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"timeMillis","show-overflow-tooltip":!0,"min-width":"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$refs.history.getTime(t.row.timeMillis)))])]}}])})],1)],1)])]),e._v(" "),i("param-modal",{attrs:{visible:e.paramVisible,deviceType:"mainLane"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),i("history-modal",{ref:"history",attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}}),e._v(" "),i("dust-modal",{attrs:{visible:e.dustVisible,deviceType:"mainLane",paramSetting:e.paramSetting},on:{"update:visible":function(t){e.dustVisible=t}}}),e._v(" "),i("alarm-modal",{attrs:{visible:e.alarmVisible},on:{"update:visible":function(t){e.alarmVisible=t}}})],1)},staticRenderFns:[]};var R=a("VU/8")(V,Z,!1,function(e){a("1QD6"),a("m5xf")},"data-v-f77b0d82",null).exports,Y=a("c/Tr"),j=a.n(Y),U={name:"MineInfo",components:{ParamModal:h,HistoryModal:b,DustModal:E,AlarmModal:W},props:{paramSignal:{type:Object,default:function(){return{}}},paramSetting:{type:Object,default:function(){return{}}},alarm:{type:Object,default:function(){return{}}},status:{type:Boolean,default:!1}},data:function(){return{paramVisible:!1,historyVisible:!1,dustVisible:!1,alarmVisible:!1,sprayNumber:100,dustNumber:1,arrX1:this.generateArray(1,19),arrX2:this.generateArray(1,19),arrX3:this.generateArray(1,19),arrY1:new Array(19).fill(0),arrY2:new Array(19).fill(0),arrY3:new Array(19).fill(0),lineData1:[],lineData2:[],lineData3:[],sprayList:[],curSpray:null}},watch:{"paramSignal.ZC_XH_GZ":{handler:function(e){var t=this;if("undefined"!=typeof old){var a=Number(e),i=Number(e)+Number(this.paramSetting.ZC_CS_YJJG)+1,r=i+Number(this.paramSetting.ZC_CS_YJTP)-1,n=1e3*Number(this.paramSetting.ZC_CS_GZYS);this.update(this.arrX1,this.arrY1,-1,a,i,r),this.initChartBar("top4","跟踪喷雾",this.arrX1,this.arrY1),setTimeout(function(){t.arrY1.fill(0),t.initChartBar("top4","跟踪喷雾",t.arrX1,t.arrY1)},n);var s=800*(Number(e)/this.sprayNumber);this.$refs.car.style.left=140+s+"px"}else this.initChartBar("top4","跟踪喷雾",this.arrX1,this.arrY1)}},"paramSignal.ZC_XH_YJ":{handler:function(e){var t=this;if("undefined"!=typeof old){var a=Number(e),i=Number(e),r=Number(e)+Number(this.paramSetting.ZC_CS_YJJG)+1,n=r+Number(this.paramSetting.ZC_CS_YJTP)-1,s=1e3*Number(this.paramSetting.ZC_CS_YJYS);this.update(this.arrX2,this.arrY2,a,i,r,n),this.initChartBar("top5","移架喷雾",this.arrX2,this.arrY2),setTimeout(function(){t.arrY2.fill(0),t.initChartBar("top5","移架喷雾",t.arrX2,t.arrY2)},s)}else this.initChartBar("top5","移架喷雾",this.arrX2,this.arrY2)}},"paramSignal.ZC_XH_FM":{handler:function(e,t){var a=this;if(void 0!==t){var i=Number(e)-Number(this.paramSetting.ZC_CS_FMSDTP),r=Number(e)-Number(this.paramSetting.ZC_CS_FMSDTP),n=Number(e)+Number(this.paramSetting.ZC_CS_FMXDTP),s=1e3*Number(this.paramSetting.ZC_CS_FMYS);this.update(this.arrX3,this.arrY3,-1,i,r,n),this.initChartBar("top6","放煤喷雾",this.arrX3,this.arrY3),setTimeout(function(){a.arrY3.fill(0),a.initChartBar("top6","放煤喷雾",a.arrX3,a.arrY3)},s)}else this.initChartBar("top6","放煤喷雾",this.arrX3,this.arrY3)}},"paramSignal.ZC_XH_FCND1":{handler:function(e){this.lineData1.push({timeMillis:Date.now(),signalValue:e}),this.initChart("top1","粉尘浓度1",this.lineData1,Number(this.paramSetting.ZC_CS_FCNDSX1))}},"paramSignal.ZC_XH_FCND2":{handler:function(e){this.lineData2.push({timeMillis:Date.now(),signalValue:e}),this.initChart("top2","粉尘浓度2",this.lineData2,Number(this.paramSetting.ZC_CS_FCNDSX2))}},"paramSignal.ZC_XH_FCND3":{handler:function(e){this.lineData3.push({timeMillis:Date.now(),signalValue:e}),this.initChart("top3","粉尘浓度3",this.lineData3,Number(this.paramSetting.ZC_CS_FCNDSX3))}},"paramSetting.ZC_CS_FCNDSX1":{handler:function(e){this.initChart("top1","粉尘浓度1",this.lineData1,Number(e))}},"paramSetting.ZC_CS_FCNDSX2":{handler:function(e){this.initChart("top2","粉尘浓度2",this.lineData2,Number(e))}},"paramSetting.ZC_CS_FCNDSX3":{handler:function(e){this.initChart("top3","粉尘浓度3",this.lineData3,Number(e))}},alarm:{handler:function(e){if(this.status){var t="";for(var a in e)"ZC_BJ_FCND1"!==a&&"ZC_XH_FCND1"!==a?"ZC_BJ_FCND2"!==a&&"ZC_XH_FCND2"!==a?"ZC_BJ_FCND3"!==a&&"ZC_XH_FCND3"!==a||0!=e[a]&&(t+='<p style="padding: 4px">粉尘浓度3报警: '+e[a]+"</p>"):0!=e[a]&&(t+='<p style="padding: 4px">粉尘浓度2报警: '+e[a]+"</p>"):0!=e[a]&&(t+='<p style="padding: 4px">粉尘浓度1报警: '+e[a]+"</p>");""!=t&&(this.$message.error({dangerouslyUseHTMLString:!0,message:t}),t="")}},deep:!0}},created:function(){var e=this;this.queryConfigValues(),this.querySignalLogCurve("ZC_XH_FCND1").then(function(t){e.lineData1=t}),this.querySignalLogCurve("ZC_XH_FCND2").then(function(t){e.lineData2=t}),this.querySignalLogCurve("ZC_XH_FCND3").then(function(t){e.lineData3=t})},methods:{generateArray:function(e,t){return j()(new Array(t+1).keys()).slice(e)},update:function(e,t,a,i,r,n){n>this.sprayNumber&&(n=this.sprayNumber),r<1&&(r=1),i<e[0]?(this.updateX(e,n-19+1),this.updateY(t,e.indexOf(a),e.indexOf(r),e.indexOf(n))):n>e[18]?(this.updateX(e,i),this.updateY(t,e.indexOf(a),e.indexOf(r),e.indexOf(n))):this.updateY(t,e.indexOf(a),e.indexOf(r),e.indexOf(n))},updateX:function(e,t){if(t<1)for(var a=0;a<19;a++)e[a]=a+1;else if(t>this.sprayNumber-19+1)for(a=0;a<19;a++)e[a]=this.sprayNumber-19+1+a;else for(a=0;a<19;a++)e[a]=t+a},updateY:function(e,t,a,i){-1!=t&&(e[t]=1);for(var r=a;r<=i;r++)e[r]=1},openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},openDust:function(){this.dustVisible=!0},openAlarm:function(){this.alarmVisible=!0},queryConfigValues:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/deviceType/queryPByTypeId",{deviceId:Number(e.$route.params.deviceId),deviceTypeId:Number(e.$route.params.deviceTypeId)});case 3:t.sent.data.data.map(function(t){"ZC_FJ_COUNT"==t.deviceTypeParameterCode&&(e.sprayNumber=Number(t.value)),"ZC_CGQ_COUNT"==t.deviceTypeParameterCode&&(e.dustNumber=Number(t.value))}),e.sprayList=e.generateArray(1,e.sprayNumber),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},querySignalLogCurve:function(e){var t=this;return s()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.post("/log/querySignalLogCurve",{deviceId:Number(t.$route.params.deviceId),deviceTypeId:Number(t.$route.params.deviceTypeId),code:e,time:[(new Date).getTime()-72e5,(new Date).getTime()]});case 3:return i=a.sent,a.abrupt("return",i.data.data);case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,t,[[0,7]])}))()},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},initChart:function(e,t,a,i){var r=[];a.map(function(e){var t=[];t.push(e.timeMillis),t.push(e.signalValue),r.push(t)});var n=this.$echarts.init(document.getElementById(e)),s={grid:{left:"10%",top:"25%",right:"8%",bottom:"15%"},title:{text:t,left:"center",textStyle:{color:"#fff"}},tooltip:{trigger:"axis",formatter:function(e,t,a){var i=e[0].dataIndex,n=new Date(r[i][0]);return"时间："+((n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()))+"<br>粉尘浓度："+r[i][1]+"(mg/cm³) "}},xAxis:{type:"time",min:(new Date).getTime()-72e5,max:(new Date).getTime(),axisLabel:{textStyle:{color:"#c0c4cc",fontSize:12}}},yAxis:{name:"(mg/cm³)",nameTextStyle:{color:"#c0c4cc"},axisLabel:{textStyle:{color:function(e){return e==i?"red":"#c0c4cc"},fontSize:12}},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:[{type:"line",color:"#FFE282",smooth:!0,symbolSize:3,areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"rgba(137, 19, 227, 0.8)"},{offset:1,color:"rgba(0, 255, 255, 0.2)"}])},lineStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#00FFFF"},{offset:1,color:"#8D12E9"}],global:!1},width:2},markLine:{symbol:"none",data:[{yAxis:i,lineStyle:{color:"red",type:"solid"}}]},markArea:{itemStyle:{color:"rgba(255, 69, 0, 0.8)"},data:[[{yAxis:"1000"},{yAxis:i}]]},data:r}]};n.setOption(s)},initChartBar:function(e,t,a,i){var r={grid:{left:"10%",top:"25%",right:"5%",bottom:"15%"},title:{text:t,left:"center",textStyle:{color:"#fff"}},xAxis:{type:"category",axisLabel:{interval:0,textStyle:{color:"#c0c4cc",fontSize:12}},data:a},yAxis:{type:"value",nameTextStyle:{color:"#c0c4cc"},axisLabel:{textStyle:{color:"#c0c4cc",fontSize:12},formatter:function(e){return 0==e?"关":1==e?"开":void 0}},splitLine:{show:!1}},series:[{data:i,type:"bar"}]};this.$echarts.init(document.getElementById(e)).setOption(r)}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-layout"},[a("div",{staticClass:"flex-main"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.dustNumber>=1,expression:"dustNumber >= 1"}],staticClass:"chart",attrs:{id:"top1"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.dustNumber>=2,expression:"dustNumber >= 2"}],staticClass:"chart",attrs:{id:"top2"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.dustNumber,expression:"dustNumber == 3"}],staticClass:"chart",attrs:{id:"top3"}})]),e._v(" "),e._m(0),e._v(" "),a("div",{ref:"car",staticClass:"car-move"}),e._v(" "),a("div",{staticClass:"operate-layout"},[a("div",{staticClass:"operate-box"},[a("p",{staticClass:"operate-title"},[e._v("当前分机")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("el-select",{attrs:{placeholder:"请选择分机"},on:{change:function(t){return e.operateInstruct("ZC_CZ_CXFJ",t)}},model:{value:e.curSpray,callback:function(t){e.curSpray=t},expression:"curSpray"}},e._l(e.sprayList,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})}),1)],1)]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[a("p",{staticClass:"operate-title"},[e._v("分机状态")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.curSpray,expression:"curSpray"}],staticClass:"button-list"},[a("div",{staticStyle:{color:"#fff"}},[e._v(e._s(0==e.paramSignal.ZC_XH_FJQT?"停用状态":1==e.paramSignal.ZC_XH_FJQT?"启用状态":""))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.paramSignal.ZC_XH_FJQT,expression:"paramSignal.ZC_XH_FJQT == 0"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("ZC_CZ_YCQTPW",256*e.curSpray+1)}}},[e._v("启用")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.paramSignal.ZC_XH_FJQT,expression:"paramSignal.ZC_XH_FJQT == 1"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("ZC_CZ_YCQTPW",256*e.curSpray)}}},[e._v("停用")])])])]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[a("p",{staticClass:"operate-title"},[e._v("参数设置")]),e._v(" "),a("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"button-orange",on:{click:e.openParam}},[e._v("参数设置")])])]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[a("p",{staticClass:"operate-title"},[e._v("远程点动")]),e._v(" "),a("div",{staticClass:"button-box"},[a("div",{staticClass:"button-list"},[a("div",{staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("ZC_CZ_YCDDKQ",256*e.curSpray+1)}}},[e._v("跟踪开启")]),e._v(" "),a("div",{staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("ZC_CZ_YCDDKQ",256*e.curSpray+2)}}},[e._v("移架开启")])]),e._v(" "),a("div",{staticClass:"button-list"},[a("div",{staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("ZC_CZ_YCDDKQ",256*e.curSpray+3)}}},[e._v("放煤开启")]),e._v(" "),a("div",{staticClass:"button-blue"},[e._v("备用")])])])]),e._v(" "),a("div",{staticClass:"operate-box",staticStyle:{"margin-top":"24px"}},[a("p",{staticClass:"operate-title"},[e._v("历史记录")]),e._v(" "),a("div",{staticClass:"button-box"},[a("div",{staticClass:"button-list"},[a("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("操作记录")]),e._v(" "),a("div",{staticClass:"button-blue",on:{click:e.openAlarm}},[e._v("报警记录")])]),e._v(" "),a("div",{staticClass:"button-list"},[a("div",{staticClass:"button-blue",on:{click:e.openDust}},[e._v("历史曲线")]),e._v(" "),a("div",{staticClass:"button-blue"},[e._v("备用")])])])])]),e._v(" "),a("param-modal",{attrs:{visible:e.paramVisible,dustNumber:e.dustNumber,deviceType:"mine"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),a("history-modal",{attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}}),e._v(" "),a("dust-modal",{attrs:{visible:e.dustVisible,deviceType:"mine",paramSignal:e.paramSignal,paramSetting:e.paramSetting},on:{"update:visible":function(t){e.dustVisible=t}}}),e._v(" "),a("alarm-modal",{attrs:{visible:e.alarmVisible},on:{"update:visible":function(t){e.alarmVisible=t}}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex-main box-space"},[t("div",{staticClass:"chart",attrs:{id:"top4"}}),this._v(" "),t("div",{staticClass:"chart",attrs:{id:"top5"}}),this._v(" "),t("div",{staticClass:"chart",attrs:{id:"top6"}})])}]};var J=a("VU/8")(U,G,!1,function(e){a("bu1I"),a("hyC/")},"data-v-66276e58",null).exports,q={name:"WindowModal",components:{ParamModal:h},props:{visible:Boolean,paramSignal:{type:Object,default:function(){return{}}},windowInfo:{type:Object,default:function(){return{}}},windowType:String},data:function(){return{paramVisible:!1,window_louvre:a("z2GJ"),window_slide:a("sRmC")}},computed:{windowSignal:function(){return this.paramSignal["FC_XH_JD"+this.windowInfo.id]},windowLength:function(){return this.paramSignal["FC_XH_CD"+this.windowInfo.id]}},watch:{windowSignal:{handler:function(e,t){var a=this;this.$nextTick(function(){a.changeWindowLouvre(e,t)})}},windowLength:{handler:function(e,t){var a=this;this.$nextTick(function(){a.changeWindowSlide(e,t)})}}},created:function(){},methods:{updateVisible:function(e){this.$emit("update:visible",e)},openParam:function(){this.paramVisible=!0},changeWindowLouvre:function(e,t){var i=this,r=e>=90?8:Math.ceil(Number(e)/15)+1,n=t>=90?8:Math.ceil(Number(t)/15)+1;if(console.log("new_index:",r,"old_index:",n),t){if(r!=n){var s=n;if(n<r)var o=setInterval(function(){i.window_louvre=a("RPIr")("./wind_"+ ++s+".png"),s==r&&clearInterval(o)},300);else o=setInterval(function(){i.window_louvre=a("RPIr")("./wind_"+--s+".png"),s==r&&clearInterval(o)},300)}}else this.window_louvre=a("RPIr")("./wind_"+r+".png")},changeWindowSlide:function(e,t){var i=this,r=e>=800?8:Math.ceil(Number(e)/133)+1,n=t>=800?8:Math.ceil(Number(t)/133)+1;if(console.log("new_index:",r,"old_index:",n),t){if(r!=n){var s=n;if(n<r)var o=setInterval(function(){i.window_slide=a("rwnq")("./window_slide"+ ++s+".png"),s==r&&clearInterval(o)},300);else o=setInterval(function(){i.window_slide=a("rwnq")("./window_slide"+--s+".png"),s==r&&clearInterval(o)},300)}}else this.window_slide=a("rwnq")("./window_slide"+r+".png")},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"window-modal",attrs:{visible:e.visible,width:"700px",modal:!1,title:e.windowInfo.name,"close-on-click-modal":!1},on:{"update:visible":e.updateVisible}},[a("div",{staticClass:"content-box"},[a("img",{staticClass:"window-img",attrs:{src:"louvre"==e.windowType?e.window_louvre:e.window_slide}}),e._v(" "),a("div",{staticClass:"window-info"},["louvre"==e.windowType?a("div",{staticClass:"button-operate button-blue",on:{click:function(t){return e.operateInstruct("FC_CZ_OPEN"+e.windowInfo.id,1)}}},[e._v("启动风窗")]):e._e(),e._v(" "),"louvre"==e.windowType?a("div",{staticClass:"button-operate button-red",on:{click:function(t){return e.operateInstruct("FC_CZ_CLOSE"+e.windowInfo.id,1)}}},[e._v("关闭风窗")]):e._e(),e._v(" "),a("div",{staticClass:"button-operate button-blue",on:{click:e.openParam}},[e._v("参数设置")]),e._v(" "),"louvre"==e.windowType?a("div",{staticClass:"window-text"},[e._v("风窗角度："+e._s(e.windowSignal))]):e._e(),e._v(" "),"slide"==e.windowType?a("div",{staticClass:"window-text"},[e._v("风窗长度："+e._s(e.windowLength))]):e._e()])])]),e._v(" "),a("param-modal",{attrs:{visible:e.paramVisible,deviceType:e.windowType,windowIndex:e.windowInfo.id},on:{"update:visible":function(t){e.paramVisible=t}}})],1)},staticRenderFns:[]};var Q=a("VU/8")(q,z,!1,function(e){a("TI0c")},"data-v-7632d466",null).exports,K={name:"DamperWindowInfo",components:{ParamModal:h,HistoryModal:b,WindowModal:Q},props:{cameraList:Array,paramSignal:{type:Object,default:function(){return{}}},switchLog:Object},data:function(){return{isOpenA:!1,isClickA:!0,isOpenB:!1,isClickB:!0,paramVisible:!1,historyVisible:!1,tableData:[],socketList:[],timerList:[],windowVisible:!1,windowInfo:{name:"",id:""}}},watch:{"paramSignal.FM_XH_KB1":{handler:function(e){JSON.parse(e)?this.closeDoorA():this.openDoorA()}},"paramSignal.FM_XH_KB2":{handler:function(e){JSON.parse(e)?this.closeDoorB():this.openDoorB()}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){this.videoPlay()},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()}),this.timerList.map(function(e){clearTimeout(e)})},methods:{headerCellStyle:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);return t[0].colSpan=0,t[1].colSpan=2,0===a?{display:"none"}:{background:"rgba(20, 128, 240, 0.8) !important"}},openDoorA:function(){var e=this;if(!this.isOpenA&&this.isClickA){this.isOpenA=!0,this.isClickA=!1,this.$refs.doorA.classList.remove("door-close-a"),this.$refs.doorA.classList.add("door-open-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-open-a"),e.$refs.doorA.style.backgroundImage="url("+a("7uwh")+")",e.isClickA=!0},1800);this.timerList.push(t)}},closeDoorA:function(){var e=this;if(this.isOpenA&&this.isClickA){this.isOpenA=!1,this.isClickA=!1,this.$refs.doorA.classList.remove("door-open-a"),this.$refs.doorA.classList.add("door-close-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-close-a"),e.$refs.doorA.style.backgroundImage="url("+a("xdPP")+")",e.isClickA=!0},1800);this.timerList.push(t)}},openDoorB:function(){var e=this;if(!this.isOpenB&&this.isClickB){this.isOpenB=!0,this.isClickB=!1,this.$refs.doorB.classList.remove("door-close-b"),this.$refs.doorB.classList.add("door-open-b");var t=setTimeout(function(){e.$refs.doorB.classList.remove("door-open-b"),e.$refs.doorB.style.backgroundImage="url("+a("Mw9F")+")",e.isClickB=!0},1800);this.timerList.push(t)}},closeDoorB:function(){var e=this;if(this.isOpenB&&this.isClickB){this.isOpenB=!1,this.isClickB=!1,this.$refs.doorB.classList.remove("door-open-b"),this.$refs.doorB.classList.add("door-close-b");var t=setTimeout(function(){e.$refs.doorB.classList.remove("door-close-b"),e.$refs.doorB.style.backgroundImage="url("+a("cFSg")+")",e.isClickB=!0},1800);this.timerList.push(t)}},openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},openWindow:function(e,t){this.windowInfo.name=e,this.windowInfo.id=t,this.windowVisible=!0},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},remoteControl:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("control",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},startPlay:function(){var e=this;this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})}}},ee={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"info-flex"},[i("div",{staticClass:"flex-left"},[i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控1")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控2")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video2",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video2",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控3")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video3",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video3",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控4")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video4",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video4",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])])]),e._v(" "),i("div",{staticClass:"flex-center"},[i("div",{staticClass:"door-box"},[i("div",{staticClass:"door-img"}),e._v(" "),i("div",{ref:"doorA",staticClass:"door-gif-a"}),e._v(" "),i("div",{ref:"doorB",staticClass:"door-gif-b"}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDCGQ1,expression:"paramSignal.FM_XH_YDCGQ1 == 'true'"}],staticClass:"door-shan shan1",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDCGQ2,expression:"paramSignal.FM_XH_YDCGQ2 == 'true'"}],staticClass:"door-shan shan2",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDCGQ1,expression:"paramSignal.FM_XH_EDCGQ1 == 'true'"}],staticClass:"door-shan shan3",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDMCHQ2,expression:"paramSignal.FM_XH_EDMCHQ2 == 'true'"}],staticClass:"door-shan shan4",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{staticClass:"door-a-light",attrs:{src:a("XFen"),alt:""}}),e._v(" "),i("img",{staticClass:"door-b-light",attrs:{src:a("XFen"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDFJ,expression:"paramSignal.FM_XH_YDFJ == 'true'"}],staticClass:"warning-a-light",attrs:{src:a("rLGt"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDFJ,expression:"paramSignal.FM_XH_EDFJ == 'true'"}],staticClass:"warning-b-light",attrs:{src:a("rLGt"),alt:""}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.paramSignal.FM_XH_YDYS,expression:"paramSignal.FM_XH_YDYS != '0'"}],staticClass:"countdown-a"},[e._v(e._s(e.paramSignal.FM_XH_YDYS))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.paramSignal.FM_XH_EDYS,expression:"paramSignal.FM_XH_EDYS != '0'"}],staticClass:"countdown-b"},[e._v(e._s(e.paramSignal.FM_XH_EDYS))]),e._v(" "),i("div",{staticClass:"desc-list"},[i("div",[e._v("A风窗1角度："+e._s(e.paramSignal.FC_XH_JD1)+"度")]),e._v(" "),i("div",[e._v("A风窗2角度："+e._s(e.paramSignal.FC_XH_JD2)+"度")]),e._v(" "),i("div",[e._v("B风窗3角度："+e._s(e.paramSignal.FC_XH_JD3)+"度")]),e._v(" "),i("div",[e._v("B风窗4角度："+e._s(e.paramSignal.FC_XH_JD4)+"度")])])]),e._v(" "),i("div",{staticClass:"operate-layout"},[i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("远程控制")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{staticStyle:{color:"#fff"}},[e._v(e._s("0"==e.paramSignal.FM_XH_CM||"false"==e.paramSignal.FM_XH_CM?"就地模式":"1"==e.paramSignal.FM_XH_CM||"true"==e.paramSignal.FM_XH_CM?"远程模式":""))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.paramSignal.FM_XH_CM||"false"==e.paramSignal.FM_XH_CM,expression:"paramSignal.FM_XH_CM == '0' || paramSignal.FM_XH_CM == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.remoteControl("FM_CS_CM",1)}}},[e._v("远程启动")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.paramSignal.FM_XH_CM||"true"==e.paramSignal.FM_XH_CM,expression:"paramSignal.FM_XH_CM == '1' || paramSignal.FM_XH_CM == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.remoteControl("FM_CS_CM",0)}}},[e._v("远程停止")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("风门操作")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_KB1,expression:"paramSignal.FM_XH_KB1 == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FM_CZ_OPEN1",1)}}},[e._v(" A 门打开")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"false"==e.paramSignal.FM_XH_KB1,expression:"paramSignal.FM_XH_KB1 == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FM_CZ_CLOSE1",1)}}},[e._v(" A 门关闭")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_KB2,expression:"paramSignal.FM_XH_KB2 == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FM_CZ_OPEN2",1)}}},[e._v(" B 门打开")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"false"==e.paramSignal.FM_XH_KB2,expression:"paramSignal.FM_XH_KB2 == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FM_CZ_CLOSE2",1)}}},[e._v(" B 门关闭")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("风窗操作")]),e._v(" "),i("div",{staticClass:"button-box"},[i("div",{staticClass:"button-list"},[i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("A风门风窗1",1)}}},[e._v("A门风窗1")]),e._v(" "),i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("A风门风窗2",2)}}},[e._v("A门风窗2")])]),e._v(" "),i("div",{staticClass:"button-list"},[i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("B风门风窗3",3)}}},[e._v("B门风窗3")]),e._v(" "),i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("B风门风窗4",4)}}},[e._v("B门风窗4")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("参数设置")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-blue",on:{click:e.openParam}},[e._v("参数设置")])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("历史数据")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("历史数据")])])])])]),e._v(" "),i("div",{staticClass:"flex-right"},[i("div",{staticClass:"table-layout"},[i("div",{staticClass:"table-box"},[i("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.switchLog.aSwitchLog,border:!0,"header-cell-style":e.headerCellStyle}},[i("el-table-column",{attrs:{label:"A风门",prop:"operationValue",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.controlMode.name+("true"==t.row.operationValue?"关闭":"开启")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"A风门",prop:"timeMillis","min-width":"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$refs.history.getTime(t.row.timeMillis)))])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"table-box"},[i("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.switchLog.bSwitchLog,border:!0,"header-cell-style":e.headerCellStyle}},[i("el-table-column",{attrs:{label:"B风门",prop:"type",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.controlMode.name+("true"==t.row.operationValue?"关闭":"开启")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"B风门",prop:"timeMillis","min-width":"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$refs.history.getTime(t.row.timeMillis)))])]}}])})],1)],1)])]),e._v(" "),i("param-modal",{attrs:{visible:e.paramVisible,deviceType:"damperWindow"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),i("history-modal",{ref:"history",attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}}),e._v(" "),i("window-modal",{attrs:{visible:e.windowVisible,windowInfo:e.windowInfo,paramSignal:e.paramSignal,windowType:"louvre"},on:{"update:visible":function(t){e.windowVisible=t}}})],1)},staticRenderFns:[]};var te=a("VU/8")(K,ee,!1,function(e){a("WoNl"),a("TzGF")},"data-v-00dae21a",null).exports,ae={name:"DamperPithead",components:{ParamModal:h,HistoryModal:b,WindowModal:Q},props:{cameraList:Array,paramSignal:{type:Object,default:function(){return{}}},paramSetting:{type:Object,default:function(){return{}}},switchLog:Object},data:function(){return{isOpenA:!1,isClickA:!0,isOpenB:!1,isClickB:!0,paramVisible:!1,historyVisible:!1,tableData:[],socketList:[],timerList:[],windowVisible:!1,windowInfo:{name:"",id:""}}},watch:{"paramSignal.FM_XH_KB1":{handler:function(e){JSON.parse(e)?this.closeDoorA():this.openDoorA()}},"paramSignal.FM_XH_KB2":{handler:function(e){JSON.parse(e)?this.closeDoorB():this.openDoorB()}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){this.videoPlay()},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()}),this.timerList.map(function(e){clearTimeout(e)})},methods:{headerCellStyle:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);return t[0].colSpan=0,t[1].colSpan=2,0===a?{display:"none"}:{background:"rgba(20, 128, 240, 0.8) !important"}},openDoorA:function(){var e=this;if(!this.isOpenA&&this.isClickA){this.isOpenA=!0,this.isClickA=!1,this.$refs.doorA.classList.remove("door-close-a"),this.$refs.doorA.classList.add("door-open-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-open-a"),e.$refs.doorA.style.backgroundImage="url("+a("7uwh")+")",e.isClickA=!0},1800);this.timerList.push(t)}},closeDoorA:function(){var e=this;if(this.isOpenA&&this.isClickA){this.isOpenA=!1,this.isClickA=!1,this.$refs.doorA.classList.remove("door-open-a"),this.$refs.doorA.classList.add("door-close-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-close-a"),e.$refs.doorA.style.backgroundImage="url("+a("xdPP")+")",e.isClickA=!0},1800);this.timerList.push(t)}},openDoorB:function(){var e=this;if(!this.isOpenB&&this.isClickB){this.isOpenB=!0,this.isClickB=!1,this.$refs.doorB.classList.remove("door-close-b"),this.$refs.doorB.classList.add("door-open-b");var t=setTimeout(function(){e.$refs.doorB.classList.remove("door-open-b"),e.$refs.doorB.style.backgroundImage="url("+a("Mw9F")+")",e.isClickB=!0},1800);this.timerList.push(t)}},closeDoorB:function(){var e=this;if(this.isOpenB&&this.isClickB){this.isOpenB=!1,this.isClickB=!1,this.$refs.doorB.classList.remove("door-open-b"),this.$refs.doorB.classList.add("door-close-b");var t=setTimeout(function(){e.$refs.doorB.classList.remove("door-close-b"),e.$refs.doorB.style.backgroundImage="url("+a("cFSg")+")",e.isClickB=!0},1800);this.timerList.push(t)}},openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},openWindow:function(e,t){this.windowInfo.name=e,this.windowInfo.id=t,this.windowVisible=!0},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},remoteControl:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("control",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},startPlay:function(){var e=this;this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})}}},ie={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"info-flex"},[i("div",{staticClass:"flex-left"},[i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控1")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控2")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video2",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video2",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])])]),e._v(" "),i("div",{staticClass:"flex-center"},[i("div",{staticClass:"door-box"},[i("div",{staticClass:"door-img"}),e._v(" "),i("div",{ref:"doorA",staticClass:"door-gif-a"}),e._v(" "),i("div",{ref:"doorB",staticClass:"door-gif-b"}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDCGQ1,expression:"paramSignal.FM_XH_YDCGQ1 == 'true'"}],staticClass:"door-shan shan1",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDCGQ2,expression:"paramSignal.FM_XH_YDCGQ2 == 'true'"}],staticClass:"door-shan shan2",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDCGQ1,expression:"paramSignal.FM_XH_EDCGQ1 == 'true'"}],staticClass:"door-shan shan3",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDMCHQ2,expression:"paramSignal.FM_XH_EDMCHQ2 == 'true'"}],staticClass:"door-shan shan4",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{staticClass:"door-a-light",attrs:{src:a("XFen"),alt:""}}),e._v(" "),i("img",{staticClass:"door-b-light",attrs:{src:a("XFen"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDFJ,expression:"paramSignal.FM_XH_YDFJ == 'true'"}],staticClass:"warning-a-light",attrs:{src:a("rLGt"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDFJ,expression:"paramSignal.FM_XH_EDFJ == 'true'"}],staticClass:"warning-b-light",attrs:{src:a("rLGt"),alt:""}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.paramSignal.FM_XH_YDYS,expression:"paramSignal.FM_XH_YDYS != '0'"}],staticClass:"countdown-a"},[e._v(e._s(e.paramSignal.FM_XH_YDYS))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.paramSignal.FM_XH_EDYS,expression:"paramSignal.FM_XH_EDYS != '0'"}],staticClass:"countdown-b"},[e._v(e._s(e.paramSignal.FM_XH_EDYS))]),e._v(" "),i("div",{staticClass:"desc-list"},[i("div",[e._v("风窗1角度："+e._s(e.paramSignal.FFM_FC_XH_JD1)+"度")]),e._v(" "),i("div",[e._v("风窗2角度："+e._s(e.paramSignal.FFM_FC_XH_JD2)+"度")]),e._v(" "),i("div",[e._v("风窗3角度："+e._s(e.paramSignal.FFM_FC_XH_JD3)+"度")]),e._v(" "),i("div",[e._v("风窗4角度："+e._s(e.paramSignal.FFM_FC_XH_JD4)+"度")])])])]),e._v(" "),i("div",{staticClass:"flex-right"},[i("div",{staticClass:"operate-layout"},[i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("远程控制")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{staticStyle:{color:"#fff"}},[e._v(e._s("0"==e.paramSetting.FFM_CS_CM||"false"==e.paramSetting.FFM_CS_CM?"就地模式":"1"==e.paramSetting.FFM_CS_CM||"true"==e.paramSetting.FFM_CS_CM?"远程模式":""))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.paramSetting.FFM_CS_CM||"false"==e.paramSetting.FFM_CS_CM,expression:"paramSetting.FFM_CS_CM == '0' || paramSetting.FFM_CS_CM == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.remoteControl("FFM_CS_CM",1)}}},[e._v("远程启动")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.paramSetting.FFM_CS_CM||"true"==e.paramSetting.FFM_CS_CM,expression:"paramSetting.FFM_CS_CM == '1' || paramSetting.FFM_CS_CM == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.remoteControl("FFM_CS_CM",0)}}},[e._v("远程停止")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("设备操作")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FFM_XH_CLOSE,expression:"paramSignal.FFM_XH_CLOSE == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FFM_CZ_OPEN",1)}}},[e._v("风门打开")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FFM_XH_OPEN||"false"==e.paramSignal.FFM_XH_CLOSE,expression:"paramSignal.FFM_XH_OPEN == 'true' || paramSignal.FFM_XH_CLOSE == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FFM_CZ_CLOSE",1)}}},[e._v("风门关闭")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FFM_FC_XH_CLOSE1&&"true"==e.paramSignal.FFM_FC_XH_CLOSE2,expression:"paramSignal.FFM_FC_XH_CLOSE1 == 'true' && paramSignal.FFM_FC_XH_CLOSE2 == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FFM_FC_CZ_OPEN",1)}}},[e._v("风窗打开")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"false"==e.paramSignal.FFM_FC_XH_CLOSE1||"false"==e.paramSignal.FFM_FC_XH_CLOSE2,expression:"paramSignal.FFM_FC_XH_CLOSE1 == 'false' || paramSignal.FFM_FC_XH_CLOSE2 == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FFM_FC_CZ_CLOSE",1)}}},[e._v("风窗关闭")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("风窗操作")]),e._v(" "),i("div",{staticClass:"button-box"},[i("div",{staticClass:"button-list"},[i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("A风门风窗1",1)}}},[e._v("风门风窗1")]),e._v(" "),i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("A风门风窗2",2)}}},[e._v("风门风窗2")])]),e._v(" "),i("div",{staticClass:"button-list"},[i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("B风门风窗3",3)}}},[e._v("风门风窗3")]),e._v(" "),i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("B风门风窗4",4)}}},[e._v("风门风窗4")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("参数设置")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-blue",on:{click:e.openParam}},[e._v("参数设置")])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("历史数据")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("历史数据")])])])])]),e._v(" "),i("param-modal",{attrs:{visible:e.paramVisible,deviceType:"pithead"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),i("history-modal",{ref:"history",attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}}),e._v(" "),i("window-modal",{attrs:{visible:e.windowVisible,windowInfo:e.windowInfo,paramSignal:e.paramSignal},on:{"update:visible":function(t){e.windowVisible=t}}})],1)},staticRenderFns:[]};var re=a("VU/8")(ae,ie,!1,function(e){a("2Xy1"),a("kGEa")},"data-v-242adffe",null).exports,ne={name:"DamperWindowSlide",components:{ParamModal:h,HistoryModal:b,WindowModal:Q},props:{cameraList:Array,paramSignal:{type:Object,default:function(){return{}}},switchLog:Object},data:function(){return{isOpenA:!1,isClickA:!0,isOpenB:!1,isClickB:!0,paramVisible:!1,historyVisible:!1,tableData:[],socketList:[],timerList:[],windowVisible:!1,windowInfo:{name:"",id:""}}},watch:{"paramSignal.FM_XH_KB1":{handler:function(e){JSON.parse(e)?this.closeDoorA():this.openDoorA()}},"paramSignal.FM_XH_KB2":{handler:function(e){JSON.parse(e)?this.closeDoorB():this.openDoorB()}}},created:function(){document.querySelectorAll("video").forEach(function(e){e.muted=!1})},mounted:function(){this.videoPlay()},updated:function(){document.querySelectorAll("video").forEach(function(e){e.paused&&e.play()})},beforeDestroy:function(){this.socketList.map(function(e){e.close()}),this.timerList.map(function(e){clearTimeout(e)})},methods:{headerCellStyle:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);return t[0].colSpan=0,t[1].colSpan=2,0===a?{display:"none"}:{background:"rgba(20, 128, 240, 0.8) !important"}},openDoorA:function(){var e=this;if(!this.isOpenA&&this.isClickA){this.isOpenA=!0,this.isClickA=!1,this.$refs.doorA.classList.remove("door-close-a"),this.$refs.doorA.classList.add("door-open-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-open-a"),e.$refs.doorA.style.backgroundImage="url("+a("7uwh")+")",e.isClickA=!0},1800);this.timerList.push(t)}},closeDoorA:function(){var e=this;if(this.isOpenA&&this.isClickA){this.isOpenA=!1,this.isClickA=!1,this.$refs.doorA.classList.remove("door-open-a"),this.$refs.doorA.classList.add("door-close-a");var t=setTimeout(function(){e.$refs.doorA.classList.remove("door-close-a"),e.$refs.doorA.style.backgroundImage="url("+a("xdPP")+")",e.isClickA=!0},1800);this.timerList.push(t)}},openDoorB:function(){var e=this;if(!this.isOpenB&&this.isClickB){this.isOpenB=!0,this.isClickB=!1,this.$refs.doorB.classList.remove("door-close-b"),this.$refs.doorB.classList.add("door-open-b");var t=setTimeout(function(){e.$refs.doorB.classList.remove("door-open-b"),e.$refs.doorB.style.backgroundImage="url("+a("Mw9F")+")",e.isClickB=!0},1800);this.timerList.push(t)}},closeDoorB:function(){var e=this;if(this.isOpenB&&this.isClickB){this.isOpenB=!1,this.isClickB=!1,this.$refs.doorB.classList.remove("door-open-b"),this.$refs.doorB.classList.add("door-close-b");var t=setTimeout(function(){e.$refs.doorB.classList.remove("door-close-b"),e.$refs.doorB.style.backgroundImage="url("+a("cFSg")+")",e.isClickB=!0},1800);this.timerList.push(t)}},openParam:function(){this.paramVisible=!0},openHistory:function(){this.historyVisible=!0},openWindow:function(e,t){this.windowInfo.name=e,this.windowInfo.id=t,this.windowVisible=!0},operateInstruct:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("command",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},remoteControl:function(e,t){var a=this;return s()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c("control",e,t,Number(a.$route.params.deviceTypeId),Number(a.$route.params.deviceId));case 2:case"end":return i.stop()}},i,a)}))()},startPlay:function(){var e=this;this.cameraList.length>0&&this.cameraList.map(function(t,a){var i=JSON.parse(localStorage.getItem("system")).websocketURL+"/videoSocket/"+t.luserId,r=new WebSocket(i);r.binaryType="arraybuffer";var n=null;r.onopen=function(e){n=new g.a({node:"video"+(a+1),mode:"video",flushingTime:15,fps:25,clearBuffer:!0,debug:!1})},r.onmessage=function(e){var t=e.data;t instanceof Object&&n.feed({video:new Uint8Array(t)})},r.onclose=function(e){console.log("获取监控视频的WebSocket连接关闭")},e.socketList.push(r)})},videoPlay:function(){document.querySelectorAll("video").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})}}},se={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"info-flex"},[i("div",{staticClass:"flex-left"},[i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控1")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video1",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video1",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控2")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video2",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video2",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控3")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video3",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video3",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])]),e._v(" "),i("div",{staticClass:"monitor-box"},[i("span",{staticClass:"monitor-title"},[e._v("监控4")]),e._v(" "),i("div",{staticClass:"monitor-video"},[i("video",{ref:"video4",staticStyle:{width:"100%",height:"100%"},attrs:{id:"video4",controls:"",autoplay:"",muted:""},domProps:{muted:!0}})])])]),e._v(" "),i("div",{staticClass:"flex-center"},[i("div",{staticClass:"door-box"},[i("div",{staticClass:"door-img"}),e._v(" "),i("div",{ref:"doorA",staticClass:"door-gif-a"}),e._v(" "),i("div",{ref:"doorB",staticClass:"door-gif-b"}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDCGQ1,expression:"paramSignal.FM_XH_YDCGQ1 == 'true'"}],staticClass:"door-shan shan1",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDCGQ2,expression:"paramSignal.FM_XH_YDCGQ2 == 'true'"}],staticClass:"door-shan shan2",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDCGQ1,expression:"paramSignal.FM_XH_EDCGQ1 == 'true'"}],staticClass:"door-shan shan3",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDMCHQ2,expression:"paramSignal.FM_XH_EDMCHQ2 == 'true'"}],staticClass:"door-shan shan4",attrs:{src:a("stP/"),alt:""}}),e._v(" "),i("img",{staticClass:"door-a-light",attrs:{src:a("XFen"),alt:""}}),e._v(" "),i("img",{staticClass:"door-b-light",attrs:{src:a("XFen"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_YDFJ,expression:"paramSignal.FM_XH_YDFJ == 'true'"}],staticClass:"warning-a-light",attrs:{src:a("rLGt"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_EDFJ,expression:"paramSignal.FM_XH_EDFJ == 'true'"}],staticClass:"warning-b-light",attrs:{src:a("rLGt"),alt:""}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.paramSignal.FM_XH_YDYS,expression:"paramSignal.FM_XH_YDYS != '0'"}],staticClass:"countdown-a"},[e._v(e._s(e.paramSignal.FM_XH_YDYS))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.paramSignal.FM_XH_EDYS,expression:"paramSignal.FM_XH_EDYS != '0'"}],staticClass:"countdown-b"},[e._v(e._s(e.paramSignal.FM_XH_EDYS))]),e._v(" "),i("div",{staticClass:"desc-list"},[i("div",[e._v("A风窗1长度："+e._s(e.paramSignal.FC_XH_CD1)+"毫米")]),e._v(" "),i("div",[e._v("A风窗2长度："+e._s(e.paramSignal.FC_XH_CD2)+"毫米")]),e._v(" "),i("div",[e._v("B风窗3长度："+e._s(e.paramSignal.FC_XH_CD3)+"毫米")]),e._v(" "),i("div",[e._v("B风窗4长度："+e._s(e.paramSignal.FC_XH_CD4)+"毫米")])])]),e._v(" "),i("div",{staticClass:"operate-layout"},[i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("远程控制")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{staticStyle:{color:"#fff"}},[e._v(e._s("0"==e.paramSignal.FM_XH_CM||"false"==e.paramSignal.FM_XH_CM?"就地模式":"1"==e.paramSignal.FM_XH_CM||"true"==e.paramSignal.FM_XH_CM?"远程模式":""))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.paramSignal.FM_XH_CM||"false"==e.paramSignal.FM_XH_CM,expression:"paramSignal.FM_XH_CM == '0' || paramSignal.FM_XH_CM == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.remoteControl("FM_CS_CM",1)}}},[e._v("远程启动")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.paramSignal.FM_XH_CM||"true"==e.paramSignal.FM_XH_CM,expression:"paramSignal.FM_XH_CM == '1' || paramSignal.FM_XH_CM == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.remoteControl("FM_CS_CM",0)}}},[e._v("远程停止")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("风门操作")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-list"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_KB1,expression:"paramSignal.FM_XH_KB1 == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FM_CZ_OPEN1",1)}}},[e._v(" A 门打开")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"false"==e.paramSignal.FM_XH_KB1,expression:"paramSignal.FM_XH_KB1 == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FM_CZ_CLOSE1",1)}}},[e._v(" A 门关闭")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"true"==e.paramSignal.FM_XH_KB2,expression:"paramSignal.FM_XH_KB2 == 'true'"}],staticClass:"button-orange",on:{click:function(t){return e.operateInstruct("FM_CZ_OPEN2",1)}}},[e._v(" B 门打开")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"false"==e.paramSignal.FM_XH_KB2,expression:"paramSignal.FM_XH_KB2 == 'false'"}],staticClass:"button-blue",on:{click:function(t){return e.operateInstruct("FM_CZ_CLOSE2",1)}}},[e._v(" B 门关闭")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("风窗操作")]),e._v(" "),i("div",{staticClass:"button-box"},[i("div",{staticClass:"button-list"},[i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("A风门风窗1",1)}}},[e._v("A门风窗1")]),e._v(" "),i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("A风门风窗2",2)}}},[e._v("A门风窗2")])]),e._v(" "),i("div",{staticClass:"button-list"},[i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("B风门风窗3",3)}}},[e._v("B门风窗3")]),e._v(" "),i("div",{staticClass:"button-blue",on:{click:function(t){return e.openWindow("B风门风窗4",4)}}},[e._v("B门风窗4")])])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("参数设置")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-blue",on:{click:e.openParam}},[e._v("参数设置")])])]),e._v(" "),i("div",{staticClass:"operate-box"},[i("p",{staticClass:"operate-title"},[e._v("历史数据")]),e._v(" "),i("div",{staticClass:"button-box",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"button-blue",on:{click:e.openHistory}},[e._v("历史数据")])])])])]),e._v(" "),i("div",{staticClass:"flex-right"},[i("div",{staticClass:"table-layout"},[i("div",{staticClass:"table-box"},[i("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.switchLog.aSwitchLog,border:!0,"header-cell-style":e.headerCellStyle}},[i("el-table-column",{attrs:{label:"A风门",prop:"operationValue",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.controlMode.name+("true"==t.row.operationValue?"关闭":"开启")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"A风门",prop:"timeMillis","min-width":"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$refs.history.getTime(t.row.timeMillis)))])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"table-box"},[i("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.switchLog.bSwitchLog,border:!0,"header-cell-style":e.headerCellStyle}},[i("el-table-column",{attrs:{label:"B风门",prop:"type",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.controlMode.name+("true"==t.row.operationValue?"关闭":"开启")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"B风门",prop:"timeMillis","min-width":"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$refs.history.getTime(t.row.timeMillis)))])]}}])})],1)],1)])]),e._v(" "),i("param-modal",{attrs:{visible:e.paramVisible,deviceType:"damperWindow"},on:{"update:visible":function(t){e.paramVisible=t}}}),e._v(" "),i("history-modal",{ref:"history",attrs:{visible:e.historyVisible},on:{"update:visible":function(t){e.historyVisible=t}}}),e._v(" "),i("window-modal",{attrs:{visible:e.windowVisible,windowInfo:e.windowInfo,paramSignal:e.paramSignal,windowType:"slide"},on:{"update:visible":function(t){e.windowVisible=t}}})],1)},staticRenderFns:[]};var oe={components:{DamperInfo:S,WindowInfo:M,WindowInfoOne:L,FireDoorInfo:A,MeasureWindInfo:X,MainLaneInfo:R,MineInfo:J,DamperWindowInfo:te,DamperPithead:re,DamperWindowSlide:a("VU/8")(ne,se,!1,function(e){a("DfYH"),a("AQ/u")},"data-v-18391478",null).exports},name:"DeviceDetail",data:function(){return{name:this.$route.params.name,deviceTypeId:this.$route.params.deviceTypeId,socket:null,cameraList:[],paramSignal:{},switchLog:{},doorSwitchLog:[],operationLogs:[],paramSetting:{},alarm:{},status:!0,dialogVisible:!1}},watch:{status:{handler:function(e){this.dialogVisible=!e},immediate:!1}},mounted:function(){this.initWebsocket(),this.startCamera()},beforeDestroy:function(){this.socket.close()},methods:{handleBack:function(){this.$router.push({name:"home"})},initWebsocket:function(){var e=this,t=JSON.parse(localStorage.getItem("system")).websocketURL+"/monitorWebSocket/"+this.deviceTypeId+"/"+this.$route.params.deviceId;this.socket=new WebSocket(t),this.socket.onopen=function(e){console.log("连接打开->",e)},this.socket.onerror=function(e){console.log("连接错误->",e)},this.socket.onmessage=function(t){var a=JSON.parse(t.data);e.paramSignal=a.parametersOfSignal,e.paramSetting=a.parametersOfParaSetting,e.switchLog=a.switchLog,e.doorSwitchLog=a.switchLog,e.operationLogs=a.operationLogs,e.status=a.connStatus,e.alarm=a.alarm}},startCamera:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/hik/start",{deviceId:Number(e.$route.params.deviceId)});case 3:a=t.sent,e.cameraList=a.data.data,200==a.data.code&&e.$nextTick(function(){"7"!=e.deviceTypeId&&e.$refs[e.deviceTypeId].startPlay()}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-box"},[a("div",{staticClass:"info-main"},[a("div",{staticClass:"info-header"},[a("i",{staticClass:"el-icon-arrow-left arrow-left",on:{click:e.handleBack}},[e._v("返回")]),e._v(" "),a("div",{staticClass:"title-box"},[a("span",{staticClass:"title"},[e._v(e._s(e.name))]),e._v(" "),a("el-tag",{attrs:{size:"mini",type:e.status?"success":"warning"}},[e._v(e._s(e.status?"在线":"离线"))])],1)]),e._v(" "),a("div",{staticClass:"main-box"},["1"==e.deviceTypeId?a("damper-info",{ref:"1",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal,switchLog:e.switchLog}}):e._e(),e._v(" "),"5"==e.deviceTypeId?a("window-info",{ref:"5",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal}}):e._e(),e._v(" "),"4"==e.deviceTypeId?a("window-info-one",{ref:"4",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal}}):e._e(),e._v(" "),"6"==e.deviceTypeId?a("measure-wind-info",{ref:"6",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal}}):e._e(),e._v(" "),"8"==e.deviceTypeId?a("main-lane-info",{ref:"8",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal,operationLogs:e.operationLogs,paramSetting:e.paramSetting,alarm:e.alarm,status:e.status}}):e._e(),e._v(" "),"7"==e.deviceTypeId?a("mine-info",{ref:"7",attrs:{paramSignal:e.paramSignal,paramSetting:e.paramSetting,alarm:e.alarm,status:e.status}}):e._e(),e._v(" "),"2"==e.deviceTypeId?a("damper-window-info",{ref:"2",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal,switchLog:e.switchLog}}):e._e(),e._v(" "),"3"==e.deviceTypeId?a("damper-window-slide",{ref:"3",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal,switchLog:e.switchLog}}):e._e(),e._v(" "),"11"==e.deviceTypeId?a("damper-pithead",{ref:"11",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal,switchLog:e.switchLog,paramSetting:e.paramSetting}}):e._e(),e._v(" "),"10"==e.deviceTypeId?a("fire-door-info",{ref:"10",attrs:{cameraList:e.cameraList,paramSignal:e.paramSignal,switchLog:e.doorSwitchLog,paramSetting:e.paramSetting}}):e._e()],1)]),e._v(" "),a("el-dialog",{staticClass:"dialog-modal",attrs:{title:"提示",visible:e.dialogVisible,width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("当前设备已离线")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(){return e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var ce=a("VU/8")(oe,le,!1,function(e){a("R1kF")},"data-v-c9b8a0c8",null);t.default=ce.exports},bu1I:function(e,t){},"c/Tr":function(e,t,a){e.exports={default:a("5zde"),__esModule:!0}},cFSg:function(e,t,a){e.exports=a.p+"static/img/b-open1.7a6eb06.png"},cSWu:function(e,t,a){(t=e.exports=a("Rt1F")).Stream=t,t.Readable=t,t.Writable=a("7dSG"),t.Duplex=a("DsFX"),t.Transform=a("D1Va"),t.PassThrough=a("f48b")},dJ8E:function(e,t){},dSV0:function(e,t){},dwcu:function(e,t,a){e.exports=a.p+"static/img/window_slide5.7c7b0ed.png"},"e/Qp":function(e,t,a){e.exports=a.p+"static/img/wind_8.e8406ac.png"},f48b:function(e,t,a){"use strict";e.exports=n;var i=a("D1Va"),r=Object.create(a("jOgh"));function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}r.inherits=a("LC74"),r.inherits(n,i),n.prototype._transform=function(e,t,a){a(null,e)}},fBQ2:function(e,t,a){"use strict";var i=a("evD5"),r=a("X8DO");e.exports=function(e,t,a){t in e?i.f(e,t,r(0,a)):e[t]=a}},"hyC/":function(e,t){},iP15:function(e,t,a){(function(t){function a(e){try{if(!t.localStorage)return!1}catch(e){return!1}var a=t.localStorage[e];return null!=a&&"true"===String(a).toLowerCase()}e.exports=function(e,t){if(a("noDeprecation"))return e;var i=!1;return function(){if(!i){if(a("throwDeprecation"))throw new Error(t);a("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(t,a("DuR2"))},iS1l:function(e,t,a){e.exports=a.p+"static/img/wind_3.0894dbc.png"},jOgh:function(e,t,a){function i(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===i(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===i(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===i(e)},t.isError=function(e){return"[object Error]"===i(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=a("EuP9").Buffer.isBuffer},kGEa:function(e,t){},m5xf:function(e,t){},mF0n:function(e,t){},q2n9:function(e,t){},qyJz:function(e,t,a){"use strict";var i=a("+ZMJ"),r=a("kM2E"),n=a("sB3e"),s=a("msXi"),o=a("Mhyx"),l=a("QRG4"),c=a("fBQ2"),u=a("3fs2");r(r.S+r.F*!a("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,r,d,p=n(e),m="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,v=void 0!==h,_=0,b=u(p);if(v&&(h=i(h,f>2?arguments[2]:void 0,2)),void 0==b||m==Array&&o(b))for(a=new m(t=l(p.length));t>_;_++)c(a,_,v?h(p[_],_):p[_]);else for(d=b.call(p),a=new m;!(r=d.next()).done;_++)c(a,_,v?s(d,h,[r.value,_],!0):r.value);return a.length=_,a}})},rLGt:function(e,t,a){e.exports=a.p+"static/img/warninglight.6c204cd.png"},rwnq:function(e,t,a){var i={"./window_slide1.png":"sRmC","./window_slide2.png":"96da","./window_slide3.png":"4PU+","./window_slide4.png":"uzNZ","./window_slide5.png":"dwcu","./window_slide6.png":"sVih","./window_slide7.png":"Dcnk","./window_slide8.png":"8Sok"};function r(e){return a(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(i)},r.resolve=n,e.exports=r,r.id="rwnq"},sRmC:function(e,t,a){e.exports=a.p+"static/img/window_slide1.47cdff0.png"},sVih:function(e,t,a){e.exports=a.p+"static/img/window_slide6.b297fee.png"},"stP/":function(e,t,a){e.exports=a.p+"static/img/shan.990352a.gif"},tVyS:function(e,t,a){e.exports=a.p+"static/img/wind_6.a46738c.png"},uzNZ:function(e,t,a){e.exports=a.p+"static/img/window_slide4.5f866a4.png"},vzCy:function(e,t,a){"use strict";var i,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(a,i){function r(a){e.removeListener(t,n),i(a)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",r),a([].slice.call(arguments))}v(e,t,n,{once:!0}),"error"!==t&&function(e,t,a){"function"==typeof e.on&&v(e,"error",t,a)}(e,r,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,a,i){var r,n,s,o;if(c(a),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),n=e._events),s=n[t]),void 0===s)s=n[t]=a,++e._eventsCount;else if("function"==typeof s?s=n[t]=i?[a,s]:[s,a]:i?s.unshift(a):s.push(a),(r=u(e))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,o=l,console&&console.warn&&console.warn(o)}return e}function p(e,t,a){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},r=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(i);return r.listener=a,i.wrapFn=r,r}function m(e,t,a){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?a?[r.listener||r]:[r]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(r):h(r,r.length)}function f(e){var t=this._events;if(void 0!==t){var a=t[e];if("function"==typeof a)return 1;if(void 0!==a)return a.length}return 0}function h(e,t){for(var a=new Array(t),i=0;i<t;++i)a[i]=e[i];return a}function v(e,t,a,i){if("function"==typeof e.on)i.once?e.once(t,a):e.on(t,a);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function r(n){i.once&&e.removeEventListener(t,r),a(n)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=h(l,c);for(a=0;a<c;++a)n(u[a],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var a,i,r,n,s;if(c(t),void 0===(i=this._events))return this;if(void 0===(a=i[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!=typeof a){for(r=-1,n=a.length-1;n>=0;n--)if(a[n]===t||a[n].listener===t){s=a[n].listener,r=n;break}if(r<0)return this;0===r?a.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(a,r),1===a.length&&(i[e]=a[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,a,i;if(void 0===(a=this._events))return this;if(void 0===a.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==a[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete a[e]),this;if(0===arguments.length){var r,n=Object.keys(a);for(i=0;i<n.length;++i)"removeListener"!==(r=n[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return m(this,e,!0)},o.prototype.rawListeners=function(e){return m(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},wG7V:function(e,t){},wGWn:function(e,t){},x0Ha:function(e,t,a){"use strict";var i=a("ypnx");function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var a=this,n=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return n||s?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(r,this,e)):i.nextTick(r,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?a._writableState?a._writableState.errorEmitted||(a._writableState.errorEmitted=!0,i.nextTick(r,a,e)):i.nextTick(r,a,e):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},xdPP:function(e,t,a){e.exports=a.p+"static/img/a-open1.dd3e436.png"},xjFc:function(e,t,a){e.exports=a.p+"static/img/firedoor1.1519bc8.png"},yPcx:function(e,t,a){e.exports=a.p+"static/img/wind_7.65c09fb.png"},yaFL:function(e,t,a){e.exports=a.p+"static/img/wind_2.dc5df88.png"},ypnx:function(e,t,a){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,a,i,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var n,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,a)});case 3:return t.nextTick(function(){e.call(null,a,i)});case 4:return t.nextTick(function(){e.call(null,a,i,r)});default:for(n=new Array(o-1),s=0;s<n.length;)n[s++]=arguments[s];return t.nextTick(function(){e.apply(null,n)})}}}:e.exports=t}).call(t,a("W2nU"))},z2GJ:function(e,t,a){e.exports=a.p+"static/img/wind_1.7c27336.png"}});
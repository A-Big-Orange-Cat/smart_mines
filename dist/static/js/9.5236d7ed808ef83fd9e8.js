webpackJsonp([9],{"0Dvh":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),l=a("exGp"),c=a.n(l),i={name:"DeviceList",data:function(){return{form_query:{name:"",type:""},type_list:[],tableData:[],current_page:1}},created:function(){var e=this;return c()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getQueryAll();case 2:return t.next=4,e.queryNormalByNameOrTypeId();case 4:case"end":return t.stop()}},t,e)}))()},methods:{onSubmit:function(){this.queryNormalByNameOrTypeId(this.form_query.name,this.form_query.type)},handleBack:function(){this.$router.push({name:"home"})},getQueryAll:function(){var e=this;return c()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("/deviceType/queryAll");case 3:a=t.sent,e.type_list=a.data.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},queryNormalByNameOrTypeId:function(e,t){var a=this;return c()(n.a.mark(function r(){var l;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.$http.post("/device/queryNormalByNameOrTypeId",{deviceName:e,deviceTypeId:t});case 3:l=r.sent,a.tableData=l.data.data,a.changeTableData(),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0);case 11:case"end":return r.stop()}},r,a,[[0,8]])}))()},changeTableData:function(){var e=this;this.tableData.map(function(t){e.type_list.forEach(function(e){t.deviceTypeId===e.deviceTypeId&&(t.deviceTypeName=e.deviceTypeName)})})},handlePage:function(e){this.current_page=e,console.log("切换分页",e)},handleInfo:function(e){this.$router.push({name:"deviceDetail",params:{name:e.deviceName,deviceId:e.deviceId,deviceTypeId:e.deviceTypeId}})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-box"},[a("div",{staticClass:"list-main"},[a("i",{staticClass:"el-icon-arrow-left arrow-left",on:{click:e.handleBack}},[e._v("返回")]),e._v(" "),a("p",{staticClass:"title"},[e._v("智能设备列表")]),e._v(" "),a("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.form_query}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.form_query.name,callback:function(t){e.$set(e.form_query,"name",t)},expression:"form_query.name"}})],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择设备类型"},model:{value:e.form_query.type,callback:function(t){e.$set(e.form_query,"type",t)},expression:"form_query.type"}},e._l(e.type_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.deviceTypeName+" ("+e.communicationProtocol.name+")",value:e.deviceTypeId}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"设备名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"region-text",on:{click:function(a){return e.handleInfo(t.row)}}},[e._v(e._s(t.row.deviceName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceTypeName",label:"设备类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceLocation",label:"设备位置",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口号",align:"center"}})],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(e){a("ZZvL")},"data-v-64bafe45",null);t.default=s.exports},ZZvL:function(e,t){}});